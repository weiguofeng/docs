# 12、撰写新闻-提交



目前我们把富文本框也弄好了--然后也可以收集到富文本框的内容

![1639985493029](../../../../.vuepress/public/images/1639985493029.png)





我们现在定义俩个变量来 收集表单的数据和 富文本框的数据

![1639985697675](../../../../.vuepress/public/images/1639985697675.png)



收集表单数据：

![1639985744959](../../../../.vuepress/public/images/1639985744959.png)



获取收集的文本框内容

![1639985789236](../../../../.vuepress/public/images/1639985789236.png)





在我们点击下一步的时候-我们获取一下收集的form信息和content信息

![1639985868506](../../../../.vuepress/public/images/1639985868506.png)



运行查看一下效果：内容都是可以获取的到的

![1639985909539](../../../../.vuepress/public/images/1639985909539.png)





如果富文本框什么都不输入也是可以获取到数据的--这个可能得处理一下

​		比如点过富文本框输入-然后又删除了内容就是**<p></p>**了

![1639985980698](../../../../.vuepress/public/images/1639985980698.png)

如果为空--我们校验一下添加个判断

![1639986160760](../../../../.vuepress/public/images/1639986160760.png)



查看效果：

![1639986189400](../../../../.vuepress/public/images/1639986189400.png)



多加个判断-因为可能为空的p标签

​		先trim一下去掉首尾的空格然后再判断--然后页面校验没有问题

![1639986295087](../../../../.vuepress/public/images/1639986295087.png)





#### 2、提交审核

​			这个保存草稿箱和提交审核的思路就是：点击按钮传入的状态不一致就可以了

​	如果状态传0就是草稿箱，如果是1就是提交

![1639986428290](../../../../.vuepress/public/images/1639986428290.png)





我们查看一下News接口需要的数据字段

![1639986612772](../../../../.vuepress/public/images/1639986612772.png)



给按钮添加事件--并传入状态值 0 为草稿箱，1是提交

![1639987089658](../../../../.vuepress/public/images/1639987089658.png)

需要的数据字段就是这些：

![1639986710228](../../../../.vuepress/public/images/1639986710228.png)





我们设置一下值-填充一下数据：发布时间字段可以先去掉-因为现在还没有发布

![1639986931817](../../../../.vuepress/public/images/1639986931817.png)





接收设置一下状态的值 0草稿箱，1提交，2审核 

![1639987150047](../../../../.vuepress/public/images/1639987150047.png)





请求完成--页面进行跳转

​		如果是0草稿箱就跳到撰写新闻中，如果不是0就跳到审核新闻中

![1639987328289](../../../../.vuepress/public/images/1639987328289.png)







#### 3、设置提醒框



我们在保存完之后-再进行一个通知的提醒

​	到组件库中先找一个提醒的组件

![1639987455740](../../../../.vuepress/public/images/1639987455740.png)





右下角的提示--使用方式

![1639987526274](../../../../.vuepress/public/images/1639987526274.png)



代码实现：

![1639987691368](../../../../.vuepress/public/images/1639987691368.png)

![1639987656859](../../../../.vuepress/public/images/1639987656859.png)



页面查看效果：没问题

![1639987736654](../../../../.vuepress/public/images/1639987736654.png)









































































































