(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{3574:function(t,s,p){t.exports=p.p+"assets/img/1642038384935.737dd7a6.png"},3575:function(t,s,p){t.exports=p.p+"assets/img/1642038840616.2d6f8a45.png"},3576:function(t,s,p){t.exports=p.p+"assets/img/1642038907394.4986ea1c.png"},3577:function(t,s,p){t.exports=p.p+"assets/img/1642039034916.2526f5bc.png"},3578:function(t,s,p){t.exports=p.p+"assets/img/1642039309320.c535382a.png"},3579:function(t,s,p){t.exports=p.p+"assets/img/1642039518374.7f76e9bc.png"},3580:function(t,s,p){t.exports=p.p+"assets/img/1642039630354.ee0c1193.png"},3581:function(t,s,p){t.exports=p.p+"assets/img/1642039815638.af2dd6a7.png"},3582:function(t,s,p){t.exports=p.p+"assets/img/1642039850939.a685317d.png"},3583:function(t,s,p){t.exports=p.p+"assets/img/1642040021797.41a20fa7.png"},3584:function(t,s,p){t.exports=p.p+"assets/img/1642040135074.163e9b69.png"},3585:function(t,s,p){t.exports=p.p+"assets/img/1642040414914.4825c7f1.png"},3586:function(t,s,p){t.exports=p.p+"assets/img/1642040447447.23991cfb.png"},3587:function(t,s,p){t.exports=p.p+"assets/img/1642040526235.4baeee9e.png"},3588:function(t,s,p){t.exports=p.p+"assets/img/1642040609121.fbb6c8e9.png"},3589:function(t,s,p){t.exports=p.p+"assets/img/1642040761931.1c6419b0.png"},3590:function(t,s,p){t.exports=p.p+"assets/img/1642040798025.1bd471bd.png"},3591:function(t,s,p){t.exports=p.p+"assets/img/1642043268427.11bfb3b7.png"},3592:function(t,s,p){t.exports=p.p+"assets/img/1642043336776.5c735181.png"},3593:function(t,s,p){t.exports=p.p+"assets/img/1642043398872.aba42f38.png"},3594:function(t,s,p){t.exports=p.p+"assets/img/1642043518239.f8582e81.png"},3595:function(t,s,p){t.exports=p.p+"assets/img/1642043796840.49f2101f.png"},3596:function(t,s,p){t.exports=p.p+"assets/img/1642043872822.fff0f60b.png"},3597:function(t,s,p){t.exports=p.p+"assets/img/1642043927932.893eeabe.png"},3598:function(t,s,p){t.exports=p.p+"assets/img/1642044009056.47f01707.png"},3599:function(t,s,p){t.exports=p.p+"assets/img/1642044193458.e5eecdb7.png"},3600:function(t,s,p){t.exports=p.p+"assets/img/1642044250943.91155cf8.png"},3601:function(t,s,p){t.exports=p.p+"assets/img/1642052421390.94259002.png"},3602:function(t,s,p){t.exports=p.p+"assets/img/1642052669968.096bb89c.png"},3603:function(t,s,p){t.exports=p.p+"assets/img/1642052775071.5cf0bd71.png"},8496:function(t,s,p){"use strict";p.r(s);var a=p(5),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"_25-jenkins分布式构建-并集成pipeline项目测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_25-jenkins分布式构建-并集成pipeline项目测试"}},[t._v("#")]),t._v(" 25.Jenkins分布式构建-并集成pipeline项目测试")]),t._v(" "),a("h2",{attrs:{id:"_1、jenkins分布式构建思路"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、jenkins分布式构建思路"}},[t._v("#")]),t._v(" 1、Jenkins分布式构建思路")]),t._v(" "),a("p",[t._v("任务可以指定执行Jenkins是服务器，也可以不指定-交给Jenkins-master主服务")]),t._v(" "),a("p",[t._v("​\t现在有10个任务，但是主服务master最多一次执行2个，那么就还有8个进入队列了")]),t._v(" "),a("p",[t._v("​\t这8个队列的任务就顺延 进入Jenkins的从slave节点")]),t._v(" "),a("p",[t._v("​\t从节点会将结果通知给主节点")]),t._v(" "),a("p",[t._v("​\t（master上需要安装Jenkins，其他从服务器不需要安装Jenkins只安装jdk-git，maven，sonar等主服务安装的从也都需要安装）")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3574),alt:"1642038384935"}})]),t._v(" "),a("h2",{attrs:{id:"_2、启动一个jenkins-slave节点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、启动一个jenkins-slave节点"}},[t._v("#")]),t._v(" 2、启动一个Jenkins-slave节点")]),t._v(" "),a("p",[t._v("在系统管理下---节点管理")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3575),alt:"1642038840616"}})]),t._v(" "),a("p",[t._v("进入节点管理--然后新建节点")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3576),alt:"1642038907394"}})]),t._v(" "),a("p",[t._v("设置节点名称")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3577),alt:"1642039034916"}})]),t._v(" "),a("p",[t._v("并发构建数--一次最多支持构建几个项目")]),t._v(" "),a("p",[t._v("远程工作目录可以自己选一个要放入节点的地方--如果没有目录会自动创建的")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3578),alt:"1642039309320"}})]),t._v(" "),a("p",[t._v("将主节点的公钥推送到从节点服务器上--用于免秘钥通信")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3579),alt:"1642039518374"}})]),t._v(" "),a("p",[t._v("然后打开主节点的私钥 copy私钥")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3580),alt:"1642039630354"}})]),t._v(" "),a("p",[t._v("添加凭据：然后点击添加")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3581),alt:"1642039815638"}})]),t._v(" "),a("p",[a("img",{attrs:{src:p(3582),alt:"1642039850939"}})]),t._v(" "),a("p",[t._v("需要配置一下工具的位置：工具就是主节点安装的所有需要的工具比如maven，jdk，git。。。。。")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3583),alt:"1642040021797"}})]),t._v(" "),a("p",[t._v("配置工具位置：")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3584),alt:"1642040135074"}})]),t._v(" "),a("p",[t._v("点击保存：")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3585),alt:"1642040414914"}})]),t._v(" "),a("p",[t._v("可以看到我们创建的节点：点击这个节点")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3586),alt:"1642040447447"}})]),t._v(" "),a("p",[t._v("进入日志查看一下：")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3587),alt:"1642040526235"}})]),t._v(" "),a("p",[t._v("可以看到会给你创建一个/home/Jenkins的文件夹")]),t._v(" "),a("p",[t._v("​\t然后在文件夹下发送过来一个remoting远程的jar包，这个jar包自动启动起来后，就启动好了 Jenkins的从节点")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3588),alt:"1642040609121"}})]),t._v(" "),a("p",[t._v("启动成功后")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3589),alt:"1642040761931"}})]),t._v(" "),a("p",[t._v("可以看到有2个空闲的Jenkins节点")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3590),alt:"1642040798025"}})]),t._v(" "),a("h2",{attrs:{id:"_3、执行一个任务使用集群"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、执行一个任务使用集群"}},[t._v("#")]),t._v(" 3、执行一个任务使用集群")]),t._v(" "),a("p",[t._v("​\t先配置一下任务")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3591),alt:"1642043268427"}})]),t._v(" "),a("p",[t._v("我们让他的执行脚本的时候sleep 10秒")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3592),alt:"1642043336776"}})]),t._v(" "),a("p",[t._v("开始构建：然后再点再点，点击构建多次")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3593),alt:"1642043398872"}})]),t._v(" "),a("p",[t._v("可以看到主服务和从服务都在构建项目--这就是我们分布式构建")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3594),alt:"1642043518239"}})]),t._v(" "),a("h4",{attrs:{id:"如何指定服务进行构建呢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何指定服务进行构建呢"}},[t._v("#")]),t._v(" 如何指定服务进行构建呢")]),t._v(" "),a("p",[t._v("​\t修改 之前的agent any 改为指定节点 node1--》这个node1是从服务节点的标签")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3595),alt:"1642043796840"}})]),t._v(" "),a("p",[t._v("开始构建项目：")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3596),alt:"1642043872822"}})]),t._v(" "),a("p",[t._v("是从节点执行的：")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3597),alt:"1642043927932"}})]),t._v(" "),a("p",[t._v("​\t之前配置的git路径有点问题，，修改一下git配置的地址")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3598),alt:"1642044009056"}})]),t._v(" "),a("p",[t._v("测试再次修改sonar")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3599),alt:"1642044193458"}})]),t._v(" "),a("p",[t._v("修改设置域名映射")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3600),alt:"1642044250943"}})]),t._v(" "),a("p",[t._v("由于从节点找不到执行脚本而发生错误--将脚本远程推送到从节点上")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3601),alt:"1642052421390"}})]),t._v(" "),a("p",[t._v("构建的时候又报错了--原因是需要和web服务端无秘钥联通")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3602),alt:"1642052669968"}})]),t._v(" "),a("p",[t._v("构建成功：")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3603),alt:"1642052775071"}})]),t._v(" "),a("p",[t._v("https://www.bilibili.com/video/BV11J411674t?p=46")])])}),[],!1,null,null,null);s.default=n.exports}}]);