(window.webpackJsonp=window.webpackJsonp||[]).push([[407],{7304:function(t,s,p){t.exports=p.p+"assets/img/1656773982846.c0f3caba.png"},7305:function(t,s,p){t.exports=p.p+"assets/img/1656774237196.d34674df.png"},7306:function(t,s,p){t.exports=p.p+"assets/img/1656774278621.cfae90d8.png"},7307:function(t,s,p){t.exports=p.p+"assets/img/1656774387589.3ad85597.png"},7308:function(t,s,p){t.exports=p.p+"assets/img/1656774488385.6056d66b.png"},7309:function(t,s,p){t.exports=p.p+"assets/img/1656774545709.f6cfe3e0.png"},7310:function(t,s,p){t.exports=p.p+"assets/img/1656775534352.f68fc60a.png"},7311:function(t,s,p){t.exports=p.p+"assets/img/1656775587905.264fe642.png"},9834:function(t,s,p){"use strict";p.r(s);var e=p(5),a=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"_6-devops-尚医通-生产环境配置抽取"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-devops-尚医通-生产环境配置抽取"}},[t._v("#")]),t._v(" 6.devops-尚医通-生产环境配置抽取")]),t._v(" "),e("p",[t._v("​\t\t我们现在需要做的是 项目的 生产和开发的隔离")]),t._v(" "),e("p",[t._v("​\t我们随便看一个尚医通的微服务的dockerfile")]),t._v(" "),e("p",[t._v("​\t\t\t注意这里使用的都是线上的配置，如nacos的地址")]),t._v(" "),e("p",[t._v("​\t\t\t而且每个微服务启动的时候都会激活 使用 服务名-prod.yml  这个配置（这个配置在Nacos中）")]),t._v(" "),e("p",[e("img",{attrs:{src:p(7304),alt:"1656773982846"}})]),t._v(" "),e("p",[t._v("我们先连接上生产环境的Nacos，按这个规则进行一下配置")]),t._v(" "),e("p",[e("img",{attrs:{src:p(7305),alt:"1656774237196"}})]),t._v(" "),e("p",[t._v("把开发环境的内容先全部拷贝过来")]),t._v(" "),e("p",[e("img",{attrs:{src:p(7306),alt:"1656774278621"}})]),t._v(" "),e("p",[t._v("比如端口号我们不改都行，因为我们会用启动命令改掉端口")]),t._v(" "),e("p",[t._v("​\t然后就是全部改为线上环境的地址")]),t._v(" "),e("p",[t._v("如sentinel")]),t._v(" "),e("p",[e("img",{attrs:{src:p(7307),alt:"1656774387589"}})]),t._v(" "),e("p",[t._v("​\t还有redis，数据库及账号密码")]),t._v(" "),e("p",[e("img",{attrs:{src:p(7308),alt:"1656774488385"}})]),t._v(" "),e("p",[t._v("创建好了")]),t._v(" "),e("p",[e("img",{attrs:{src:p(7309),alt:"1656774545709"}})]),t._v(" "),e("p",[t._v("这样的话，我们在部署微服务的时候，dockerfile打包的时候就会加载出生产环境的配置文件，然后就会以生产环境的模式运行")]),t._v(" "),e("p",[t._v("​\t然后是我们的每个微服务都需要这么做")]),t._v(" "),e("p",[t._v("注意：在医院的管理系统部署的时候要注意一下，由于他不是一个SpringCloud应用，他只是一个单体应用，没有bootstrap.yml，所以他的生产环境配置是在项目的代码中，他的dockerfile只是激活prod生产环境，但是没有连Nacos配置中心")]),t._v(" "),e("p",[e("img",{attrs:{src:p(7310),alt:"1656775534352"}})]),t._v(" "),e("p",[t._v("修改yml")]),t._v(" "),e("p",[e("img",{attrs:{src:p(7311),alt:"1656775587905"}})]),t._v(" "),e("p",[t._v("https://www.bilibili.com/video/BV13Q4y1C7hS?p=111&spm_id_from=pageDriver&vd_source=243ad3a9b323313aa1441e5dd414a4ef")])])}),[],!1,null,null,null);s.default=a.exports}}]);