(window.webpackJsonp=window.webpackJsonp||[]).push([[398],{6395:function(t,s,a){t.exports=a.p+"assets/img/1660723832252.e8dc5da3.png"},6396:function(t,s,a){t.exports=a.p+"assets/img/1660723946651.fafd4dd9.png"},6397:function(t,s,a){t.exports=a.p+"assets/img/1660724063643.dda69341.png"},6398:function(t,s,a){t.exports=a.p+"assets/img/1660724222931.607e1dcc.png"},6399:function(t,s,a){t.exports=a.p+"assets/img/1660724324590.ade35180.png"},6400:function(t,s,a){t.exports=a.p+"assets/img/1660727689129.84676a20.png"},6401:function(t,s,a){t.exports=a.p+"assets/img/1660724526082.a06bcf13.png"},8841:function(t,s,a){"use strict";a.r(s);var e=a(5),p=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"_23-devops-最后的部署优化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_23-devops-最后的部署优化"}},[t._v("#")]),t._v(" 23.devops-最后的部署优化")]),t._v(" "),e("p",[t._v("​\t我们前面已经把用户的前端系统部署好了，但现在有个问题就是有些数据可以出来有些数据不显示的问题，需要我们处理一下")]),t._v(" "),e("p",[e("img",{attrs:{src:a(6395),alt:"1660723832252"}})]),t._v(" "),e("p",[t._v("比如我们现在测试一下搜索，我们发现请求的地址 server-gateway.his是交给浏览器解析的，浏览器肯定不知道这个地址是什么")]),t._v(" "),e("p",[e("img",{attrs:{src:a(6396),alt:"1660723946651"}})]),t._v(" "),e("p",[t._v("我们还是使用集群网关暴露的端口--这样才可以访问的到")]),t._v(" "),e("p",[e("img",{attrs:{src:a(6397),alt:"1660724063643"}})]),t._v(" "),e("p",[t._v("我们这个网关的外网访问地址是我们自己配置生成的，如果我们下次升级网关系统，重新配置外网访问的话，这个端口可能就会发生改变")]),t._v(" "),e("p",[t._v("​\t所以如果我们确定了这个项目后期部署后是需要暴露外网端口的，那么在deploy.yml中就不需要写ClusterIP 这个了")]),t._v(" "),e("p",[e("img",{attrs:{src:a(6398),alt:"1660724222931"}})]),t._v(" "),e("p",[t._v("​\t我们改为NodePort--然后固定一下暴露的端口，要不然端口随机还是会有问题")]),t._v(" "),e("p",[e("img",{attrs:{src:a(6399),alt:"1660724324590"}})]),t._v(" "),e("p",[t._v("重新部署后--数据就有了")]),t._v(" "),e("p",[e("img",{attrs:{src:a(6400),alt:"1660727689129"}})]),t._v(" "),e("h4",{attrs:{id:"思考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#思考"}},[t._v("#")]),t._v(" 思考")]),t._v(" "),e("p",[t._v("​\t为什么我们的yygh-admin和yygh-site这俩个镜像的占用差距这么大")]),t._v(" "),e("p",[e("img",{attrs:{src:a(6401),alt:"1660724526082"}})]),t._v(" "),e("p",[t._v("​\t我们如何对镜像进行瘦身呢？")]),t._v(" "),e("p",[t._v("​")]),t._v(" "),e("p",[t._v("https://www.bilibili.com/video/BV13Q4y1C7hS?p=128&spm_id_from=pageDriver&vd_source=243ad3a9b323313aa1441e5dd414a4ef")])])}),[],!1,null,null,null);s.default=p.exports}}]);