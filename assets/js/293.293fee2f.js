(window.webpackJsonp=window.webpackJsonp||[]).push([[293],{2577:function(s,n,t){s.exports=t.p+"assets/img/1639993951905.9693d022.png"},2578:function(s,n,t){s.exports=t.p+"assets/img/1639994268715.ad7ac035.png"},2579:function(s,n,t){s.exports=t.p+"assets/img/1639994645436.45356f14.png"},2580:function(s,n,t){s.exports=t.p+"assets/img/1639994769027.49b9f963.png"},2581:function(s,n,t){s.exports=t.p+"assets/img/1639995479397.263fd3fd.png"},2582:function(s,n,t){s.exports=t.p+"assets/img/1639996187092.c2d5b685.png"},2583:function(s,n,t){s.exports=t.p+"assets/img/1639996259192.5c92c425.png"},2584:function(s,n,t){s.exports=t.p+"assets/img/1639996275351.f5f0460a.png"},2585:function(s,n,t){s.exports=t.p+"assets/img/1639996363707.ab2b20bd.png"},2586:function(s,n,t){s.exports=t.p+"assets/img/1639996382852.52bef4ce.png"},8418:function(s,n,t){"use strict";t.r(n);var e=t(5),a=Object(e.a)({},(function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"_15-草稿箱-预览新闻"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_15-草稿箱-预览新闻"}},[s._v("#")]),s._v(" 15.草稿箱-预览新闻")]),s._v(" "),e("p",[s._v("我们在进行预览页面的填充内容的时候--可能刷新页面会导致报错，原因是最开始我们将数据设置为空，等请求回来后设置值，但是还没请求回来的时候页面渲染就已经发生了错误")]),s._v(" "),e("p",[s._v("​\t\t解决方案--1.可以给初始值设置默认值，但是如果多级的话也是会报错的")]),s._v(" "),e("p",[s._v("​\t\t\t\t\t\t 2.加？问号，如果 初始值有就往下点内容，如果没有就空下，我们有很多属性，每一个都加也怪烦人的")]),s._v(" "),e("p",[s._v("​\t\t\t\t\t\t 3.我们可以将内容先判断一下")]),s._v(" "),e("p",[e("img",{attrs:{src:t(2577),alt:"1639993951905"}})]),s._v(" "),e("p",[e("img",{attrs:{src:t(2578),alt:"1639994268715"}})]),s._v(" "),e("p",[s._v("内容的填充：")]),s._v(" "),e("p",[s._v("​\t\t时间的处理使用moment 需要下载一下")]),s._v(" "),e("p",[e("img",{attrs:{src:t(2579),alt:"1639994645436"}})]),s._v(" "),e("p",[s._v("时间搓的处理")]),s._v(" "),e("p",[e("img",{attrs:{src:t(2580),alt:"1639994769027"}})]),s._v(" "),e("p",[s._v("注意这个发布时间需要判断一下：")]),s._v(" "),e("p",[s._v("​\t如果有就格式化转化---如果没有就显示为-")]),s._v(" "),e("p",[e("img",{attrs:{src:t(2581),alt:"1639995479397"}})]),s._v(" "),e("p",[s._v("代码：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('import React, { useEffect, useState } from \'react\'\nimport { PageHeader, Descriptions } from \'antd\';\nimport moment from \'moment\'\nimport axios from \'axios\';\n\nexport default function NewsPreview(props) {\n    const [newsInfo, setnewsInfo] = useState(null)\n    useEffect(() => {\n        // console.log()\n        axios.get(`/news/${props.match.params.id}?_expand=category&_expand=role`).then(res => {\n            setnewsInfo(res.data)\n        })\n    }, [props.match.params.id])\n\n    const auditList = ["未审核", \'审核中\', \'已通过\', \'未通过\']\n    const publishList = ["未发布", \'待发布\', \'已上线\', \'已下线\']\n    return (\n        <div>\n            {\n                newsInfo && <div>\n\n                    <PageHeader\n                        onBack={() => window.history.back()}\n                        title={newsInfo.title}\n                        subTitle={newsInfo.category.title}\n                    >\n                        <Descriptions size="small" column={3}>\n                            <Descriptions.Item label="创建者">{newsInfo.author}</Descriptions.Item>\n                            <Descriptions.Item label="创建时间">{moment(newsInfo.createTime).format("YYYY/MM/DD HH:mm:ss")}</Descriptions.Item>\n                            <Descriptions.Item label="发布时间">{\n                                newsInfo.publishTime ? moment(newsInfo.publishTime).format("YYYY/MM/DD HH:mm:ss") : "-"\n                            }</Descriptions.Item>\n                            <Descriptions.Item label="区域">{newsInfo.region}</Descriptions.Item>\n                            <Descriptions.Item label="审核状态" ><span style={{ color: "red" }}>{auditList[newsInfo.auditState]}</span></Descriptions.Item>\n                            <Descriptions.Item label="发布状态" ><span style={{ color: "red" }}>{publishList[newsInfo.publishState]}</span></Descriptions.Item>\n                            <Descriptions.Item label="访问数量">{newsInfo.view}</Descriptions.Item>\n                            <Descriptions.Item label="点赞数量">{newsInfo.star}</Descriptions.Item>\n                            <Descriptions.Item label="评论数量">0</Descriptions.Item>\n\n                        </Descriptions>\n                    </PageHeader>\n\n                    <div dangerouslySetInnerHTML={{\n                        __html:newsInfo.content\n                    }} style={{\n                        margin:"0 24px",\n                        border:"1px solid gray"\n                    }}>\n                    </div>\n                </div>\n            }\n        </div>\n    )\n}\n\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br"),e("span",{staticClass:"line-number"},[s._v("46")]),e("br"),e("span",{staticClass:"line-number"},[s._v("47")]),e("br"),e("span",{staticClass:"line-number"},[s._v("48")]),e("br"),e("span",{staticClass:"line-number"},[s._v("49")]),e("br"),e("span",{staticClass:"line-number"},[s._v("50")]),e("br"),e("span",{staticClass:"line-number"},[s._v("51")]),e("br"),e("span",{staticClass:"line-number"},[s._v("52")]),e("br"),e("span",{staticClass:"line-number"},[s._v("53")]),e("br"),e("span",{staticClass:"line-number"},[s._v("54")]),e("br"),e("span",{staticClass:"line-number"},[s._v("55")]),e("br")])]),e("p",[s._v("页面查看效果：")]),s._v(" "),e("p",[e("img",{attrs:{src:t(2582),alt:"1639996187092"}})]),s._v(" "),e("p",[s._v("最终的内容显示：")]),s._v(" "),e("p",[e("img",{attrs:{src:t(2583),alt:"1639996259192"}})]),s._v(" "),e("p",[s._v("这个内容稍微得调整一下，得让他渲染出来，没有进行html的DOM解析")]),s._v(" "),e("p",[e("img",{attrs:{src:t(2584),alt:"1639996275351"}})]),s._v(" "),e("p",[s._v("这样处理一下：")]),s._v(" "),e("p",[e("img",{attrs:{src:t(2585),alt:"1639996363707"}})]),s._v(" "),e("p",[s._v("好了这回显示没有问题了")]),s._v(" "),e("p",[e("img",{attrs:{src:t(2586),alt:"1639996382852"}})])])}),[],!1,null,null,null);n.default=a.exports}}]);