(window.webpackJsonp=window.webpackJsonp||[]).push([[200],{3039:function(t,s,p){t.exports=p.p+"assets/img/1636703116361.c10158af.png"},3040:function(t,s,p){t.exports=p.p+"assets/img/1636706097886.7a7c917c.png"},3041:function(t,s,p){t.exports=p.p+"assets/img/1636705793849.09266169.png"},3042:function(t,s,p){t.exports=p.p+"assets/img/1636706192173.7ddc983b.png"},3043:function(t,s,p){t.exports=p.p+"assets/img/1636706565411.88d13f37.png"},3044:function(t,s,p){t.exports=p.p+"assets/img/1636707662076.50a603be.png"},3045:function(t,s,p){t.exports=p.p+"assets/img/1636706831527.99b6e0d5.png"},3046:function(t,s,p){t.exports=p.p+"assets/img/1636706881472.109d7b66.png"},3047:function(t,s,p){t.exports=p.p+"assets/img/1636707724166.3c9fa7fc.png"},3048:function(t,s,p){t.exports=p.p+"assets/img/1636707853246.9b38cb52.png"},3049:function(t,s,p){t.exports=p.p+"assets/img/1636708970930.4e482c76.png"},3050:function(t,s,p){t.exports=p.p+"assets/img/1636709056529.25b1f04f.png"},3051:function(t,s,p){t.exports=p.p+"assets/img/1636709295537.f77b0c92.png"},3052:function(t,s,p){t.exports=p.p+"assets/img/1636709462889.8d32eb38.png"},8475:function(t,s,p){"use strict";p.r(s);var r=p(5),a=Object(r.a)({},(function(){var t=this,s=t.$createElement,r=t._self._c||s;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"_27-点击索引置顶该索引城市"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_27-点击索引置顶该索引城市"}},[t._v("#")]),t._v(" 27.点击索引置顶该索引城市")]),t._v(" "),r("p",[t._v("想要达到的效果：其实就是我们点击右侧字母索引---然后将对应的城市给置顶显示")]),t._v(" "),r("p",[r("img",{attrs:{src:p(3039),alt:"1636703116361"}})]),t._v(" "),r("p",[r("strong",[t._v("实现步骤：")])]),t._v(" "),r("p",[r("img",{attrs:{src:p(3040),alt:"1636706097886"}})]),t._v(" "),r("p",[t._v("主要是使用到List组件的scrollToRow这个方法：这个方法的作用就是被用于安全的滚动到指定的行")]),t._v(" "),r("p",[t._v("​\t但是这个有一个限制就是 Ensure row is visible 这个行必须是可见的---意思就是这个行必须是出现过可视区域内的。如果你这行还没有渲染过就可能发生定位不准确的问题。")]),t._v(" "),r("p",[r("img",{attrs:{src:p(3041),alt:"1636705793849"}})]),t._v(" "),r("h5",{attrs:{id:"代码实现"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#代码实现"}},[t._v("#")]),t._v(" 代码实现：")]),t._v(" "),r("p",[t._v("1、绑定事件：")]),t._v(" "),r("p",[r("img",{attrs:{src:p(3042),alt:"1636706192173"}})]),t._v(" "),r("p",[t._v("2.调用scrollToRow方法-让List滚动到指定行，那么怎么调用这个方法呢，就需要创建ref对象")]),t._v(" "),r("p",[t._v("​\t在constructor中，调用React.createRef() 创建ref对象")]),t._v(" "),r("p",[r("img",{attrs:{src:p(3043),alt:"1636706565411"}})]),t._v(" "),r("p",[t._v("然后在List组件中 指定一下创建好的ref对象，就是将ref对象和List组件关联到一起")]),t._v(" "),r("p",[r("img",{attrs:{src:p(3044),alt:"1636707662076"}})]),t._v(" "),r("p",[t._v("然后通过ref的current 属性，获取到组件实例，再调用组件的scrollToRow方法")]),t._v(" "),r("p",[t._v("现在我们可以在事件中调用scrollToRow方法了")]),t._v(" "),r("p",[r("img",{attrs:{src:p(3045),alt:"1636706831527"}})]),t._v(" "),r("p",[t._v("查看页面效果：点击J发生滚动-但是定位不准确--并没有置顶")]),t._v(" "),r("p",[r("img",{attrs:{src:p(3046),alt:"1636706881472"}})]),t._v(" "),r("p",[t._v("通过设置List组件的scrollToAlignment 属性   来置顶")]),t._v(" "),r("p",[r("img",{attrs:{src:p(3047),alt:"1636707724166"}})]),t._v(" "),r("p",[t._v("查看效果：点击字母J----定位准确")]),t._v(" "),r("p",[r("img",{attrs:{src:p(3048),alt:"1636707853246"}})]),t._v(" "),r("p",[t._v("如果没有在页面显示，定位的时候就会发生精度的问题，如何解决")]),t._v(" "),r("p",[t._v("调用List 组件的 measureAllRows  方法，提前计算高度来解决，使用钩子函数componentDidMount()在页面渲染完毕后计算高度")]),t._v(" "),r("p",[r("img",{attrs:{src:p(3049),alt:"1636708970930"}})]),t._v(" "),r("p",[t._v("可能发生报错：")]),t._v(" "),r("p",[r("img",{attrs:{src:p(3050),alt:"1636709056529"}})]),t._v(" "),r("p",[t._v("原因是异步调用获取数据的时候List还没执行完毕，然后就执行高度计算导致的")]),t._v(" "),r("p",[t._v("​\t我们通过await 等待执行完成List有数据后再执行")]),t._v(" "),r("p",[r("img",{attrs:{src:p(3051),alt:"1636709295537"}})]),t._v(" "),r("p",[t._v("查看效果： 点击X，定位完全正确")]),t._v(" "),r("p",[r("img",{attrs:{src:p(3052),alt:"1636709462889"}})])])}),[],!1,null,null,null);s.default=a.exports}}]);