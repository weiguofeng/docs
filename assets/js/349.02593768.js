(window.webpackJsonp=window.webpackJsonp||[]).push([[349],{7769:function(s,t,a){s.exports=a.p+"assets/img/1643336464324.d722aa2b.png"},7770:function(s,t,a){s.exports=a.p+"assets/img/1643336694318.d486b5d4.png"},7771:function(s,t,a){s.exports=a.p+"assets/img/1643339335347.18af8246.png"},7772:function(s,t,a){s.exports=a.p+"assets/img/1643339443854.676ec58d.png"},7773:function(s,t,a){s.exports=a.p+"assets/img/1643339995095.1d0ba2b2.png"},7774:function(s,t,a){s.exports=a.p+"assets/img/1643340065349.fcb59b57.png"},7775:function(s,t,a){s.exports=a.p+"assets/img/1643340128093.0c61bb49.png"},7776:function(s,t,a){s.exports=a.p+"assets/img/1643340175326.206f4241.png"},7777:function(s,t,a){s.exports=a.p+"assets/img/1643340200612.f78a79e5.png"},9194:function(s,t,a){"use strict";a.r(t);var n=a(5),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"_9-容器化-命令-提交改变"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_9-容器化-命令-提交改变"}},[s._v("#")]),s._v(" 9.容器化-命令-提交改变")]),s._v(" "),n("p",[s._v("​\t比如：我们现在使用的nginx修改了很多内容，但是在我们使用新电脑的时候，不希望重新的配置，希望还是使用这个修改好的镜像---那么就需要改变镜像，传输镜像")]),s._v(" "),n("h2",{attrs:{id:"_4、提交改变"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4、提交改变"}},[s._v("#")]),s._v(" 4、提交改变")]),s._v(" "),n("p",[s._v("将自己修改好的镜像提交")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" commit "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OPTIONS"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" CONTAINER "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("REPOSITORY"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(":TAG"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" commit -a "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"leifengyang"')]),s._v("  -m "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"首页变化"')]),s._v(" 341d81f7504f guignginx:v1.0\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -a 代表作者 ，-m 是变更信息 镜像id号 新的镜像名称：设置版本号")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("可以看到会产生一个新的镜像")]),s._v(" "),n("p",[n("img",{attrs:{src:a(7769),alt:"1643336464324"}})]),s._v(" "),n("p",[s._v("我们现在就可以启动这个新的修改后的nginx容器了")]),s._v(" "),n("p",[n("img",{attrs:{src:a(7770),alt:"1643336694318"}})]),s._v(" "),n("p",[s._v("如果我们现在有一台新的机器，那么我们怎么能把这个修改的镜像给到这个新的服务机器呢")]),s._v(" "),n("p",[s._v("使用的第一种办法就是物理传输，将镜像保存为压缩包，别的机器去下载这个压缩包")]),s._v(" "),n("h3",{attrs:{id:"_1、镜像传输"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、镜像传输"}},[s._v("#")]),s._v(" 1、镜像传输")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将镜像保存成压缩包")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" save -o abc.tar guignginx:v1.0\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 别的机器加载这个镜像--就是将tar的压缩包 -i 读 到本机成为镜像")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" load -i abc.tar\n\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 离线安装")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("实际操作：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(7771),alt:"1643339335347"}})]),s._v(" "),n("p",[s._v("然后我们通过物理传输 scp的方式发送给其他服务器")]),s._v(" "),n("p",[n("img",{attrs:{src:a(7772),alt:"1643339443854"}})]),s._v(" "),n("p",[s._v("我们在新服务器上--需要将abc.tar加载到docker的镜像中")]),s._v(" "),n("p",[s._v("使用docker load -i 压缩包名称       -i 的意思就是image 镜像")]),s._v(" "),n("p",[s._v("​\t读取到了镜像 guigunginx:v1.0")]),s._v(" "),n("p",[n("img",{attrs:{src:a(7773),alt:"1643339995095"}})]),s._v(" "),n("p",[s._v("我们查看镜像，发现新的机器中就有这个镜像了")]),s._v(" "),n("p",[n("img",{attrs:{src:a(7774),alt:"1643340065349"}})]),s._v(" "),n("p",[s._v("在新的服务器上运行测试：")]),s._v(" "),n("p",[n("img",{attrs:{src:a(7775),alt:"1643340128093"}})]),s._v(" "),n("p",[s._v("正常运行")]),s._v(" "),n("p",[n("img",{attrs:{src:a(7776),alt:"1643340175326"}})]),s._v(" "),n("p",[s._v("访问一下：没有问题，是我们修改后的镜像")]),s._v(" "),n("p",[n("img",{attrs:{src:a(7777),alt:"1643340200612"}})])])}),[],!1,null,null,null);t.default=e.exports}}]);