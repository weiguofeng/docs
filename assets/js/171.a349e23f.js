(window.webpackJsonp=window.webpackJsonp||[]).push([[171],{4085:function(t,s,a){t.exports=a.p+"assets/img/image-20220105225917473.9547fe4a.png"},4086:function(t,s,a){t.exports=a.p+"assets/img/image-20220105230252723.1829aba8.png"},4087:function(t,s,a){t.exports=a.p+"assets/img/image-20220105230400098.7a42137b.png"},4088:function(t,s,a){t.exports=a.p+"assets/img/image-20220105230507173.702f9ff7.png"},4089:function(t,s,a){t.exports=a.p+"assets/img/image-20220105230732129.37e4beba.png"},4090:function(t,s,a){t.exports=a.p+"assets/img/image-20220105231104143.7a724140.png"},4091:function(t,s,a){t.exports=a.p+"assets/img/image-20220105231437496.8138756d.png"},4092:function(t,s,a){t.exports=a.p+"assets/img/image-20220105231516530.6a7904af.png"},4093:function(t,s,a){t.exports=a.p+"assets/img/image-20220105231849435.7b26723c.png"},4094:function(t,s,a){t.exports=a.p+"assets/img/image-20220105232042997.0f3356e1.png"},4095:function(t,s,a){t.exports=a.p+"assets/img/image-20220105232338927.97834e8c.png"},4096:function(t,s,a){t.exports=a.p+"assets/img/image-20220105232428858.49db7aec.png"},4097:function(t,s,a){t.exports=a.p+"assets/img/image-20220105232612106.24e5fc25.png"},4098:function(t,s,a){t.exports=a.p+"assets/img/image-20220105232640282.3c2aecc7.png"},4099:function(t,s,a){t.exports=a.p+"assets/img/image-20220105232957425.89440abb.png"},4100:function(t,s,a){t.exports=a.p+"assets/img/image-20220105233339618.be59b60c.png"},4101:function(t,s,a){t.exports=a.p+"assets/img/image-20220105233437244.f931ffcc.png"},9220:function(t,s,a){"use strict";a.r(s);var e=a(5),i=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"_5-手动实现集群架构代码上线"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-手动实现集群架构代码上线"}},[t._v("#")]),t._v(" 5-手动实现集群架构代码上线")]),t._v(" "),e("p",[t._v("​\t我们先看一下自动发布项目架构图：")]),t._v(" "),e("p",[e("img",{attrs:{src:a(4085),alt:"image-20220105225917473"}})]),t._v(" "),e("p",[t._v("我们先搞3台机器-1台lb负载均衡，2台web")]),t._v(" "),e("p",[e("img",{attrs:{src:a(4086),alt:"image-20220105230252723"}})]),t._v(" "),e("h2",{attrs:{id:"_1、配置nginx"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1、配置nginx"}},[t._v("#")]),t._v(" 1、配置nginx")]),t._v(" "),e("p",[t._v("在5这台服务器上安装nginx")]),t._v(" "),e("p",[e("img",{attrs:{src:a(4087),alt:"image-20220105230400098"}})]),t._v(" "),e("p",[t._v("到nginx目录下，查看一下nginx的配置")]),t._v(" "),e("p",[e("img",{attrs:{src:a(4088),alt:"image-20220105230507173"}})]),t._v(" "),e("p",[t._v("然后我们编辑一个负载均衡的配置：在conf.d下")]),t._v(" "),e("p",[e("img",{attrs:{src:a(4089),alt:"image-20220105230732129"}})]),t._v(" "),e("p",[t._v("​\t配置的意思是：有人访问server_name html.oldxu.com这个地址的话-监听的是80端口，我就代理到html这个资源池，而html的资源池配置的就是2台web服务器的地址")]),t._v(" "),e("p",[e("img",{attrs:{src:a(4090),alt:"image-20220105231104143"}})]),t._v(" "),e("p",[t._v("nginx -t 检查一下配置文件语法是否正确--没有问题")]),t._v(" "),e("p",[e("img",{attrs:{src:a(4091),alt:"image-20220105231437496"}})]),t._v(" "),e("p",[t._v("重启nginx")]),t._v(" "),e("p",[e("img",{attrs:{src:a(4092),alt:"image-20220105231516530"}})]),t._v(" "),e("h2",{attrs:{id:"_2、配置后端web服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2、配置后端web服务"}},[t._v("#")]),t._v(" 2、配置后端web服务")]),t._v(" "),e("p",[t._v("​\t在7这台服务器上配置一下nginx")]),t._v(" "),e("p",[e("img",{attrs:{src:a(4093),alt:"image-20220105231849435"}})]),t._v(" "),e("p",[t._v("然后配置nginx 监听80端口，然后配置请求服务名称是 html.oldxu.com")]),t._v(" "),e("p",[t._v("​\t\t配置项目路径是在/code/web下，然后请求的是index 或者 index.html")]),t._v(" "),e("p",[e("img",{attrs:{src:a(4094),alt:"image-20220105232042997"}})]),t._v(" "),e("p",[t._v("然后重启nginx")]),t._v(" "),e("p",[e("img",{attrs:{src:a(4095),alt:"image-20220105232338927"}})]),t._v(" "),e("p",[t._v("然后创建/code/web文件夹")]),t._v(" "),e("p",[e("img",{attrs:{src:a(4096),alt:"image-20220105232428858"}})]),t._v(" "),e("p",[t._v("第二台web服务也是一样的配置")]),t._v(" "),e("p",[t._v("请求一下服务看看：403 因为我们的code/web下什么也没有")]),t._v(" "),e("p",[e("img",{attrs:{src:a(4097),alt:"image-20220105232612106"}})]),t._v(" "),e("p",[e("img",{attrs:{src:a(4098),alt:"image-20220105232640282"}})]),t._v(" "),e("h2",{attrs:{id:"_3、手动将jenkins获取的代码推送到服务器上"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3、手动将jenkins获取的代码推送到服务器上"}},[t._v("#")]),t._v(" 3、手动将Jenkins获取的代码推送到服务器上")]),t._v(" "),e("p",[t._v("​\t\t进入到Jenkins的工作目录--然后进入到项目文件夹下")]),t._v(" "),e("p",[t._v("​\t\t使用scp -r ./* 全部推送到 10.0.0.7服务器下的 /code/web目录下")]),t._v(" "),e("p",[t._v("​\t\t需要输入yes建立连接和推送的服务器密码")]),t._v(" "),e("p",[e("img",{attrs:{src:a(4099),alt:"image-20220105232957425"}})]),t._v(" "),e("p",[t._v("10.0.0.8也一样推送一下：")]),t._v(" "),e("p",[e("img",{attrs:{src:a(4100),alt:"image-20220105233339618"}})]),t._v(" "),e("p",[t._v("我们这回访问一下项目：发现没有问题请求成功了")]),t._v(" "),e("p",[e("img",{attrs:{src:a(4101),alt:"image-20220105233437244"}})]),t._v(" "),e("p",[t._v("​\t那么现在问题来了：如果项目名称改变了，我们是不是还得重复一下以上的步骤--比较麻烦的")]),t._v(" "),e("p",[t._v("如果改了一下名称，又发现不对还是得改回来是不是又得操作一遍。。。。我们后续就要解决这样的问题")])])}),[],!1,null,null,null);s.default=i.exports}}]);