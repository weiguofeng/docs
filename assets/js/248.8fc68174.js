(window.webpackJsonp=window.webpackJsonp||[]).push([[248],{5875:function(t,s,a){t.exports=a.p+"assets/img/1700313637520.f45b48ac.png"},5876:function(t,s,a){t.exports=a.p+"assets/img/1700313996234.4941c76a.png"},5877:function(t,s,a){t.exports=a.p+"assets/img/1700314489768.7847e221.png"},5878:function(t,s,a){t.exports=a.p+"assets/img/1700314551721.082d3888.png"},5879:function(t,s,a){t.exports=a.p+"assets/img/1700314627764.ede2e27e.png"},5880:function(t,s,a){t.exports=a.p+"assets/img/1700314898172.667c1cea.png"},5881:function(t,s,a){t.exports=a.p+"assets/img/1700314836100.394fb3ff.png"},5882:function(t,s,a){t.exports=a.p+"assets/img/1700314959959.e6299b59.png"},5883:function(t,s,a){t.exports=a.p+"assets/img/1700315020667.1dddfea7.png"},5884:function(t,s,a){t.exports=a.p+"assets/img/1700315128773.c06f2c2a.png"},5885:function(t,s,a){t.exports=a.p+"assets/img/1700315311115.41819f56.png"},5886:function(t,s,a){t.exports=a.p+"assets/img/1700315363597.5afc5bec.png"},8784:function(t,s,a){"use strict";a.r(s);var r=a(5),e=Object(r.a)({},(function(){var t=this,s=t.$createElement,r=t._self._c||s;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"_13、乐观锁悲观锁"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_13、乐观锁悲观锁"}},[t._v("#")]),t._v(" 13、乐观锁悲观锁")]),t._v(" "),r("p",[r("img",{attrs:{src:a(5875),alt:"1700313637520"}})]),t._v(" "),r("p",[r("img",{attrs:{src:a(5876),alt:"1700313996234"}})]),t._v(" "),r("h4",{attrs:{id:"_2、模拟修改冲突"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2、模拟修改冲突"}},[t._v("#")]),t._v(" 2、模拟修改冲突")]),t._v(" "),r("p",[t._v("​\t"),r("img",{attrs:{src:a(5877),alt:"1700314489768"}})]),t._v(" "),r("p",[t._v("​\t\t\t预想是100 + 50 -30=120 实际上是70")]),t._v(" "),r("p",[r("img",{attrs:{src:a(5878),alt:"1700314551721"}})]),t._v(" "),r("p",[r("img",{attrs:{src:a(5879),alt:"1700314627764"}})]),t._v(" "),r("p",[t._v("​\t在这种情况下如果不使用锁的情况下，就会有问题")]),t._v(" "),r("h4",{attrs:{id:"_3、乐观锁插件"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3、乐观锁插件"}},[t._v("#")]),t._v(" 3、乐观锁插件")]),t._v(" "),r("p",[t._v("​\t配置类中设置乐观锁插件")]),t._v(" "),r("p",[r("img",{attrs:{src:a(5880),alt:"1700314898172"}})]),t._v(" "),r("p",[t._v("​\t我们在MybatisPlus中使用@Version注解来标识乐观锁字段就可以实现乐观锁的功能了")]),t._v(" "),r("p",[r("img",{attrs:{src:a(5881),alt:"1700314836100"}})]),t._v(" "),r("p",[t._v("​\t我们重新测试：")]),t._v(" "),r("p",[r("img",{attrs:{src:a(5882),alt:"1700314959959"}})]),t._v(" "),r("p",[t._v("​\t结果是150---也不是我们期望的120，因为小王在修改的时候是失败的")]),t._v(" "),r("p",[r("img",{attrs:{src:a(5883),alt:"1700315020667"}})]),t._v(" "),r("p",[r("img",{attrs:{src:a(5884),alt:"1700315128773"}})]),t._v(" "),r("h4",{attrs:{id:"_3、优化修改"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3、优化修改"}},[t._v("#")]),t._v(" 3、优化修改")]),t._v(" "),r("p",[t._v("​\t\t判断是否失败，失败就重试")]),t._v(" "),r("p",[r("img",{attrs:{src:a(5885),alt:"1700315311115"}})]),t._v(" "),r("p",[t._v("​\t这样查看结果--达到预期120了")]),t._v(" "),r("p",[r("img",{attrs:{src:a(5886),alt:"1700315363597"}})]),t._v(" "),r("p",[t._v("https://www.bilibili.com/video/BV12R4y157Be?p=48&spm_id_from=pageDriver&vd_source=243ad3a9b323313aa1441e5dd414a4ef")]),t._v(" "),r("p",[t._v("​\t乐观锁---在表中添加version字段就可以了")])])}),[],!1,null,null,null);s.default=e.exports}}]);