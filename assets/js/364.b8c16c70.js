(window.webpackJsonp=window.webpackJsonp||[]).push([[364],{6793:function(s,a,t){s.exports=t.p+"assets/img/1651828458796.e78360c9.png"},6794:function(s,a,t){s.exports=t.p+"assets/img/1651828758408.8c0dcfab.png"},6795:function(s,a,t){s.exports=t.p+"assets/img/1651829884740.891990c1.png"},6796:function(s,a,t){s.exports=t.p+"assets/img/1651831600818.9bdab872.png"},6797:function(s,a,t){s.exports=t.p+"assets/img/1651831774476.672aca19.png"},6798:function(s,a,t){s.exports=t.p+"assets/img/1651831848894.677927f1.png"},6799:function(s,a,t){s.exports=t.p+"assets/img/1651831953655.19033e42.png"},6800:function(s,a,t){s.exports=t.p+"assets/img/1651832185691.541e5cc7.png"},8792:function(s,a,t){"use strict";t.r(a);var n=t(5),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"_41-k8s核心实战-存储抽象-使用configmap抽取公共配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_41-k8s核心实战-存储抽象-使用configmap抽取公共配置"}},[s._v("#")]),s._v(" 41.k8s核心实战-存储抽象-使用configMap抽取公共配置")]),s._v(" "),n("p",[s._v("​\t\t之前我们了解到如果我们想把Pod的目录挂载到外部的话就可以使用PV和PVC进行对Pod的目录挂载，但也可以使用原生的方式直接挂载到文件服务器上。这种方式最大的特点就是--我们最好是在挂载目录的时候进行使用。")]),s._v(" "),n("p",[s._v("​\t\t但是我们往往会出现这样的情况，例如以前我们使用docker部署的redis，我们希望把redis的配置文件也挂载出来，这样我修改了redis的配置文件让redis重启一下redis就可以使用到他最新的配置了。包括未来我们安装MySQL也会将MySQL的配置文件挂出来。为了方便修改我们都会把这些配置文件放出来")]),s._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[s._v("#### k8s中挂载配置文件\n")])])]),n("h4",{attrs:{id:"configmap"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#configmap"}},[s._v("#")]),s._v(" ConfigMap：")]),s._v(" "),n("p",[s._v("​\t在k8s中挂载文件夹使用PV与PVC，挂载配置文件的话使用ConfigMap--他可以抽取应用配置，并且可以自动更新。")]),s._v(" "),n("p",[s._v("​\t以后想挂载配置文件，1.先把准备要挂载的配置文件创建为配置集,  2.然后在启动我们应用的时候创建Pod的时候引用一下这个配置集就可以了")]),s._v(" "),n("p",[s._v("​\t这个configMap是专门来管理以后你的所有配置的。")]),s._v(" "),n("h4",{attrs:{id:"_1、redis示例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、redis示例"}},[s._v("#")]),s._v(" 1、redis示例")]),s._v(" "),n("p",[s._v("​\t把之前的配置文件创建为配置集")]),s._v(" "),n("p",[s._v("​\tcreate cm--创建配置集")]),s._v(" "),n("p",[s._v("​\tredis-conf配置集的名称")]),s._v(" "),n("p",[s._v("​\t--from-file需要统一管理的配置文件路径及文件全称")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建配置，redis保存到k8s的etcd；")]),s._v("\nkubectl create cm redis-conf --from-file"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("redis.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("​\t我们使用"),n("strong",[s._v("kubectl get cm")]),s._v("的时候也可以看到我们刚刚"),n("strong",[s._v("创建的配置集")])]),s._v(" "),n("p",[s._v("​\t创建的这个配置集其实是在k8s的etcd下这个档案库中，我们放心的创建我们的配置集只要k8s活着那么这个配置集就一定是存在的。")]),s._v(" "),n("p",[n("img",{attrs:{src:t(6793),alt:"1651828458796"}})]),s._v(" "),n("p",[s._v("​\t我们可以看一下，创建的这个配置集如果是yaml的方式的话内容是什么样的")]),s._v(" "),n("p",[n("img",{attrs:{src:t(6794),alt:"1651828758408"}})]),s._v(" "),n("p",[s._v("​\tname就是配置集的名称")]),s._v(" "),n("p",[s._v("​\tdata中是所有真正的数据")]),s._v(" "),n("div",{staticClass:"language-yaml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-yaml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#data是所有真正的数据，key：默认是文件名   value：配置文件的内容")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("redis.conf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),n("span",{pre:!0,attrs:{class:"token scalar string"}},[s._v("\n    appendonly yes")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ConfigMap\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("conf\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" default\n  \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h4",{attrs:{id:"_2、创建pod"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、创建pod"}},[s._v("#")]),s._v(" 2、创建Pod")]),s._v(" "),n("div",{staticClass:"language-yaml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-yaml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/redis-master/redis.conf"')]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#指的是redis容器内部的位置")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containerPort")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumeMounts")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mountPath")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /data\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" data\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mountPath")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("master\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" config\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" data\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("emptyDir")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" config\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("configMap")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("conf\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("items")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("key")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis.conf\n          "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("path")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis.conf\n          \n          \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br")])]),n("p",[s._v("​\t我们用图表达一下这个挂载的关系")]),s._v(" "),n("p",[s._v("​\tkey指的是 data下的key，path指的是Pod容器中的文件名称")]),s._v(" "),n("p",[n("img",{attrs:{src:t(6795),alt:"1651829884740"}})]),s._v(" "),n("p",[s._v("​\t\t以后无论是redis或者是mysql等等，以后都是可以使用这种方式进行k8s的配置管理的")]),s._v(" "),n("p",[s._v("我们在应用了创建的Pod之后，我们进入容器查看一下是否这个redis的配置使用的我们配置集的配置")]),s._v(" "),n("p",[s._v("​\t\t发现是的-里面有内容为appendonly yes")]),s._v(" "),n("p",[n("img",{attrs:{src:t(6796),alt:"1651831600818"}})]),s._v(" "),n("p",[s._v("我们使用这个配置集挂载的另外优点就是，如果我们在外部把redis的配置文件修改了，他在内部也是可以自动改掉的。")]),s._v(" "),n("p",[s._v("​\t我们修改一下配置集然后测试一下：")]),s._v(" "),n("p",[n("img",{attrs:{src:t(6797),alt:"1651831774476"}})]),s._v(" "),n("p",[s._v("比如我们添加一行配置信息，设置密码")]),s._v(" "),n("p",[n("img",{attrs:{src:t(6798),alt:"1651831848894"}})]),s._v(" "),n("p",[s._v("我们再来到容器中进行查看一下，差不多1分钟左右发现配置文件也是同步过来的")]),s._v(" "),n("p",[n("img",{attrs:{src:t(6799),alt:"1651831953655"}})]),s._v(" "),n("p",[s._v("​\t\t未来只要是我们想要挂载配置文件，我们都推荐这种ConfigMap的方式")]),s._v(" "),n("h4",{attrs:{id:"_3-检查配置是否生效"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-检查配置是否生效"}},[s._v("#")]),s._v(" 3.检查配置是否生效")]),s._v(" "),n("p",[s._v("​\t我们进入容器，使用redis-cli客户端工具连接 执行一下 CONFIG GET 配置项")]),s._v(" "),n("p",[s._v("​\t\tappendonly是生效的，而requirepass是没有生效的因为这个是后改的需要重启才可以")]),s._v(" "),n("p",[s._v("​\t"),n("img",{attrs:{src:t(6800),alt:"1651832185691"}})]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("kubectl "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it redis -- redis-cli\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" CONFIG GET appendonly\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" CONFIG GET requirepass\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h4",{attrs:{id:"_4-修改configmap"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-修改configmap"}},[s._v("#")]),s._v(" 4.修改ConfigMap")]),s._v(" "),n("div",{staticClass:"language-yaml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-yaml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ConfigMap\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" example"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("config\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("redis-config")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),n("span",{pre:!0,attrs:{class:"token scalar string"}},[s._v("\n    maxmemory 2mb\n    maxmemory-policy allkeys-lru ")]),s._v("\n    \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h4",{attrs:{id:"_5、检查配置是否更新"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5、检查配置是否更新"}},[s._v("#")]),s._v(" 5、检查配置是否更新")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("kubectl "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it redis -- redis-cli\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" CONFIG GET maxmemory\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" CONFIG GET maxmemory-policy\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("检查指定文件内容是否已经更新")]),s._v(" "),n("p",[s._v("修改了CM。Pod里面的配置文件会跟着变")]),s._v(" "),n("p",[n("strong",[s._v("配置值未更改，因为需要重新启动 Pod 才能从关联的 ConfigMap 中获取更新的值。")])]),s._v(" "),n("p",[n("strong",[s._v("原因：我们的Pod部署的中间件自己本身没有热更新能力")])]),s._v(" "),n("p",[n("strong",[s._v("以后我们挂载目录用PV&PVC，挂载文件使用ConfigMap")])]),s._v(" "),n("h2",{attrs:{id:"_3、secret"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3、secret"}},[s._v("#")]),s._v(" 3、Secret")]),s._v(" "),n("p",[s._v("Secret 对象类型用来保存敏感信息，例如密码、OAuth 令牌和 SSH 密钥。 将这些信息放在 secret 中比放在 "),n("a",{attrs:{href:"https://kubernetes.io/docs/concepts/workloads/pods/pod-overview/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Pod"),n("OutboundLink")],1),s._v(" 的定义或者 "),n("a",{attrs:{href:"https://kubernetes.io/zh/docs/reference/glossary/?all=true#term-image",target:"_blank",rel:"noopener noreferrer"}},[s._v("容器镜像"),n("OutboundLink")],1),s._v(" 中来说更加安全和灵活。")]),s._v(" "),n("p",[s._v("​")]),s._v(" "),n("p",[s._v("https://www.bilibili.com/video/BV13Q4y1C7hS?p=65&spm_id_from=pageDriver")]),s._v(" "),n("p",[s._v("​")]),s._v(" "),n("p",[s._v("​")]),s._v(" "),n("p",[s._v("​")])])}),[],!1,null,null,null);a.default=e.exports}}]);