(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{3953:function(t,s,p){t.exports=p.p+"assets/img/1641977940962.51d55dab.png"},3954:function(t,s,p){t.exports=p.p+"assets/img/1641978011113.ecd8f69f.png"},3955:function(t,s,p){t.exports=p.p+"assets/img/1641978116439.bc709ee9.png"},3956:function(t,s,p){t.exports=p.p+"assets/img/1641978194736.a1cd749f.png"},3957:function(t,s,p){t.exports=p.p+"assets/img/1641978292407.43cd79ed.png"},3958:function(t,s,p){t.exports=p.p+"assets/img/1641978618585.b77f7aec.png"},3959:function(t,s,p){t.exports=p.p+"assets/img/1641978669519.9fbece93.png"},3960:function(t,s,p){t.exports=p.p+"assets/img/1641978976428.342a0849.png"},3961:function(t,s,p){t.exports=p.p+"assets/img/1641979072999.6bb35ec6.png"},3962:function(t,s,p){t.exports=p.p+"assets/img/1641979144636.34056cf5.png"},3963:function(t,s,p){t.exports=p.p+"assets/img/1641979236523.2c020350.png"},3964:function(t,s,p){t.exports=p.p+"assets/img/1641979349010.28abe1f3.png"},3965:function(t,s,p){t.exports=p.p+"assets/img/1641979461436.1ce26e19.png"},3966:function(t,s,p){t.exports=p.p+"assets/img/1641979505372.b5bda49b.png"},3967:function(t,s,p){t.exports=p.p+"assets/img/1641979544229.0024fdf1.png"},3968:function(t,s,p){t.exports=p.p+"assets/img/1641979670812.bc5a29d5.png"},3969:function(t,s,p){t.exports=p.p+"assets/img/1641979801271.4b1ff61c.png"},3970:function(t,s,p){t.exports=p.p+"assets/img/1641979928884.5af129ab.png"},3971:function(t,s,p){t.exports=p.p+"assets/img/1641980003716.e4cae341.png"},3972:function(t,s,p){t.exports=p.p+"assets/img/1641981441955.c0fe2033.png"},3973:function(t,s,p){t.exports=p.p+"assets/img/1641981647371.d5532837.png"},3974:function(t,s,p){t.exports=p.p+"assets/img/1641981766992.d175ede8.png"},3975:function(t,s,p){t.exports=p.p+"assets/img/1641981889660.cd724ee2.png"},3976:function(t,s,p){t.exports=p.p+"assets/img/1641982091891.0db69f54.png"},9214:function(t,s,p){"use strict";p.r(s);var a=p(5),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"_23-jenkins-pipeine实现代码自动化部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_23-jenkins-pipeine实现代码自动化部署"}},[t._v("#")]),t._v(" 23.Jenkins-pipeine实现代码自动化部署")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("## 1、Jenkins pipeine构建html项目\n")])])]),a("p",[t._v("​\t先是拉取代码--》代码检测--》代码构建---》代码部署--》消息通知")]),t._v(" "),a("h4",{attrs:{id:"_1、新建一个html的项目在jenkins中"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、新建一个html的项目在jenkins中"}},[t._v("#")]),t._v(" 1、新建一个html的项目在Jenkins中")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3953),alt:"1641977940962"}})]),t._v(" "),a("p",[t._v("​\t点击流水线语法--然后查看文档")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3954),alt:"1641978011113"}})]),t._v(" "),a("p",[t._v("选择checkout 查看checkout的步骤")]),t._v(" "),a("p",[t._v("​\t配置好git地址和token，还有项目的分支")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3955),alt:"1641978116439"}})]),t._v(" "),a("p",[t._v("然后点击-生成流水线脚本")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3956),alt:"1641978194736"}})]),t._v(" "),a("p",[t._v("复制生成的流水线脚本--放到我们需要编辑的pipeine代码中")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3957),alt:"1641978292407"}})]),t._v(" "),a("p",[t._v("流水线的第二步--代码检测")]),t._v(" "),a("p",[t._v("​\t将之前执行流水线的脚本，放入到Shell script 的然后生成 流水线的语法")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3958),alt:"1641978618585"}})]),t._v(" "),a("p",[t._v("复制放入流水线代码中")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3959),alt:"1641978669519"}})]),t._v(" "),a("p",[t._v("流水线的第三步构建-HTML是不需要进行构建的---第四步是代码部署执行部署脚本")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3960),alt:"1641978976428"}})]),t._v(" "),a("p",[t._v("​\t还需要处理一下构建完成的通知--找到钉钉")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3961),alt:"1641979072999"}})]),t._v(" "),a("p",[t._v("设置token，生成流水线代码")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3962),alt:"1641979144636"}})]),t._v(" "),a("p",[t._v("​\t编写流水线代码的钉钉通知")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3963),alt:"1641979236523"}})]),t._v(" "),a("p",[t._v("​\t流水线代码写完，然后放入到Jenkins中")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3964),alt:"1641979349010"}})]),t._v(" "),a("h4",{attrs:{id:"_2、配置pipeine基本信息-选择参数化构建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、配置pipeine基本信息-选择参数化构建"}},[t._v("#")]),t._v(" 2、配置pipeine基本信息，选择参数化构建")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3965),alt:"1641979461436"}})]),t._v(" "),a("p",[t._v("​\t流水线的代码还需要改一下")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3966),alt:"1641979505372"}})]),t._v(" "),a("p",[t._v("改为变量 ${git_version}")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3967),alt:"1641979544229"}})]),t._v(" "),a("h2",{attrs:{id:"_2、开始构建项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、开始构建项目"}},[t._v("#")]),t._v(" 2、开始构建项目")]),t._v(" "),a("h4",{attrs:{id:"_1、点击构建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、点击构建"}},[t._v("#")]),t._v(" 1、点击构建")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3968),alt:"1641979670812"}})]),t._v(" "),a("p",[t._v("每个阶段的--过程显示的非常清楚耗时也有显示")]),t._v(" "),a("p",[t._v("​\t也可以点击任意流水线过程进行查看日志")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3969),alt:"1641979801271"}})]),t._v(" "),a("p",[t._v("执行完毕--成功了")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3970),alt:"1641979928884"}})]),t._v(" "),a("p",[t._v("这里缺了一个sonar的图标--之前我们是可以点击进入到sonar的")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3971),alt:"1641980003716"}})]),t._v(" "),a("p",[t._v("我们需要修改一下pipeline的代码")]),t._v(" "),a("p",[t._v("​\t加入withSonarQubeEnv然后包裹之前的执行检测的代码就可以了")]),t._v(" "),a("p",[t._v("​\t注意：引号中的SonarQube得和你的Jenkins配的sonar服务器名称一致")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3972),alt:"1641981441955"}})]),t._v(" "),a("p",[t._v("​\t然后应用保存")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3973),alt:"1641981647371"}})]),t._v(" "),a("p",[t._v("再次构建--完成后出现了sonar的图标--可以点击键入")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3974),alt:"1641981766992"}})]),t._v(" "),a("h2",{attrs:{id:"_3、构建失败进行终止"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、构建失败进行终止"}},[t._v("#")]),t._v(" 3、构建失败进行终止")]),t._v(" "),a("p",[t._v("​\t如果我们在流水线构建的时候发生的错误失败，我们将如何进行对操作的终止")]),t._v(" "),a("p",[t._v("​\t如：timeout设置超时时间，如果这个waitFor这个变量提取的信息不是ok的话就说明代码检查构建过程失败了，然后error 返回提示信息--这个任务就直接结束了，后面的任务也都不运行了。。")]),t._v(" "),a("p",[a("img",{attrs:{src:p(3975),alt:"1641981889660"}})]),t._v(" "),a("p",[a("img",{attrs:{src:p(3976),alt:"1641982091891"}})])])}),[],!1,null,null,null);s.default=e.exports}}]);