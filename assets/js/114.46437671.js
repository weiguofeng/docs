(window.webpackJsonp=window.webpackJsonp||[]).push([[114],{8308:function(t,s,a){"use strict";a.r(s);var r=a(5),_=Object(r.a)({},(function(){var t=this,s=t.$createElement,r=t._self._c||s;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"_4、安装mysqld-exporter组件监控mysqld服务"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4、安装mysqld-exporter组件监控mysqld服务"}},[t._v("#")]),t._v(" 4、安装mysqld-exporter组件监控mysqld服务")]),t._v(" "),r("p",[t._v("​")]),t._v(" "),r("h2",{attrs:{id:"_1、远程监控mysqld服务"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1、远程监控mysqld服务"}},[t._v("#")]),t._v(" 1、远程监控MySqld服务")]),t._v(" "),r("p",[t._v("​\t\t我们想使用promethus监控mysql，那么就需要在被监控的设备上 安装mysqld-exporter这个组件")]),t._v(" "),r("p",[r("img",{attrs:{src:a(874),alt:"1678608939185"}})]),t._v(" "),r("h2",{attrs:{id:"_2、上传组件到服务器"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2、上传组件到服务器"}},[t._v("#")]),t._v(" 2、上传组件到服务器")]),t._v(" "),r("p",[r("img",{attrs:{src:a(875),alt:"1678609140805"}})]),t._v(" "),r("h2",{attrs:{id:"_3、解压与安装mysqld组件"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3、解压与安装mysqld组件"}},[t._v("#")]),t._v(" 3、解压与安装mysqld组件")]),t._v(" "),r("p",[r("img",{attrs:{src:a(876),alt:"1678609208379"}})]),t._v(" "),r("p",[t._v("​\t然后重命名---因为解压后的名字比较长")]),t._v(" "),r("p",[r("img",{attrs:{src:a(877),alt:"1678609262252"}})]),t._v(" "),r("h2",{attrs:{id:"_4、安装mysql"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4、安装mysql"}},[t._v("#")]),t._v(" 4、安装mysql")]),t._v(" "),r("p",[t._v("​\t\tmariadb -- 是mysql的一个分支")]),t._v(" "),r("p",[t._v("​\t\t"),r("img",{attrs:{src:a(878),alt:"1678609362534"}})]),t._v(" "),r("p",[t._v("​\t\t\t*代表安装mariadb全部组件")]),t._v(" "),r("p",[t._v("​\t\t\tyum安装--或者其他方式安装")]),t._v(" "),r("p",[t._v("​\t\t\t启动---systemctl start mariadb")]),t._v(" "),r("p",[t._v("​\t\t\tsystemctl restart 重新启动")]),t._v(" "),r("p",[t._v("​\t\t\t设置开机启动")]),t._v(" "),r("p",[t._v("​\t启动后占用3306端口：")]),t._v(" "),r("p",[r("img",{attrs:{src:a(879),alt:"1678609716516"}})]),t._v(" "),r("h3",{attrs:{id:"_4-1、实际工作中不推荐yum安装mariadb"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-1、实际工作中不推荐yum安装mariadb"}},[t._v("#")]),t._v(" 4.1、实际工作中不推荐yum安装mariadb")]),t._v(" "),r("p",[t._v("​\t\t\t其实相当于mysql的分支或者说阉割版本，正规还是安装mysql")]),t._v(" "),r("p",[t._v("​")]),t._v(" "),r("h3",{attrs:{id:"_4-2、创建mysql的账号-用于收集数据"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-2、创建mysql的账号-用于收集数据"}},[t._v("#")]),t._v(" 4.2、创建mysql的账号--用于收集数据")]),t._v(" "),r("p",[t._v("​\t\t因为这个监控promethus是需要根据这个账号去收集数据的。")]),t._v(" "),r("p",[t._v("​\t\t这个账号随便就可以，也不需要远程访问，本机访问就可以")]),t._v(" "),r("p",[t._v("​")]),t._v(" "),r("p",[t._v("​\t\t现在我们创建一个用户名为mysql_monitor密码是123的账号")]),t._v(" "),r("p",[t._v("​\t\t\t主机名只有本机localhost，也可以开启远程")]),t._v(" "),r("p",[t._v("​\t\t\treplication client代表主从  process收集")]),t._v(" "),r("p",[r("img",{attrs:{src:a(880),alt:"1678609896152"}})]),t._v(" "),r("p",[t._v("​")]),t._v(" "),r("p",[t._v("设置完成后--刷新一下权限")]),t._v(" "),r("p",[t._v("​\tflush privileges;")]),t._v(" "),r("p",[t._v("退出exit；")]),t._v(" "),r("h2",{attrs:{id:"_5、在mysqld-exporter组件中配置mysql信息"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_5、在mysqld-exporter组件中配置mysql信息"}},[t._v("#")]),t._v(" 5、在mysqld-exporter组件中配置mysql信息")]),t._v(" "),r("h3",{attrs:{id:"_5-1、创建一个miriadb配置文件"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_5-1、创建一个miriadb配置文件"}},[t._v("#")]),t._v(" 5.1、创建一个miriadb配置文件")]),t._v(" "),r("p",[t._v("​\t 需要在这个配置文件中填写 我们刚刚创建的用户信息")]),t._v(" "),r("p",[t._v("​\t它启动之后就会自动使用这个账号--去mysql中拉取数据")]),t._v(" "),r("p",[t._v("​\tvim--去编辑这个文件----这个文件是"),r("strong",[t._v("手动创建的默认是没有的")])]),t._v(" "),r("p",[r("img",{attrs:{src:a(881),alt:"1678610340174"}})]),t._v(" "),r("p",[r("img",{attrs:{src:a(882),alt:"1678610512714"}})]),t._v(" "),r("h2",{attrs:{id:"_6、启动mysqld-exporter组件"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_6、启动mysqld-exporter组件"}},[t._v("#")]),t._v(" 6、启动mysqld-exporter组件")]),t._v(" "),r("p",[r("img",{attrs:{src:a(883),alt:"1678610631412"}})]),t._v(" "),r("p",[t._v("​\t并且查看端口---端口存在 组件已运行")]),t._v(" "),r("p",[r("img",{attrs:{src:a(884),alt:"1678610682064"}})]),t._v(" "),r("p",[t._v("​\t我们去请求一个 IP+9104/metrics 可以看到我们组件获取到的数据")]),t._v(" "),r("p",[r("img",{attrs:{src:a(885),alt:"1678610771704"}})]),t._v(" "),r("p",[t._v("​\t现在promethus还不知道有这样的节点--需要在promethus中配置一下")]),t._v(" "),r("h2",{attrs:{id:"_7、promethus配置监控mysqld节点信息"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_7、promethus配置监控mysqld节点信息"}},[t._v("#")]),t._v(" 7、promethus配置监控mysqld节点信息")]),t._v(" "),r("p",[t._v("​\t\t修改promethus的配置文件---添加一段配置")]),t._v(" "),r("p",[r("img",{attrs:{src:a(886),alt:"1678610943127"}})]),t._v(" "),r("p",[r("img",{attrs:{src:a(887),alt:"1678611078801"}})]),t._v(" "),r("p",[t._v("​\t\tpkill promethus 强制杀死进程")]),t._v(" "),r("p",[t._v("​\t\t重新启动：")]),t._v(" "),r("p",[t._v("​\t\t\t"),r("img",{attrs:{src:a(888),alt:"1678611136207"}})]),t._v(" "),r("p",[t._v("​")]),t._v(" "),r("p",[t._v("查看端口占用情况：")]),t._v(" "),r("p",[t._v("​\t"),r("img",{attrs:{src:a(889),alt:"1678611179723"}})]),t._v(" "),r("p",[t._v("​")]),t._v(" "),r("p",[t._v("​\t我们进入promethus的web界面发现--多了一个mariadb")]),t._v(" "),r("p",[r("img",{attrs:{src:a(890),alt:"1678611242774"}})]),t._v(" "),r("p",[t._v("​\t比如我们现在看一下mariadb的相关监控内容")]),t._v(" "),r("p",[r("img",{attrs:{src:a(891),alt:"1678611322219"}})]),t._v(" "),r("p",[t._v("​\t比如 mysql的线程连接点")]),t._v(" "),r("p",[r("img",{attrs:{src:a(892),alt:"1678611402479"}})]),t._v(" "),r("p",[t._v("​\t我们看到在一个小时内---只有一个节点连接")]),t._v(" "),r("p",[r("img",{attrs:{src:a(893),alt:"1678611454046"}})]),t._v(" "),r("p",[t._v("https://www.bilibili.com/video/BV16J411z7SQ?p=8&spm_id_from=pageDriver&vd_source=243ad3a9b323313aa1441e5dd414a4ef")])])}),[],!1,null,null,null);s.default=_.exports},874:function(t,s,a){t.exports=a.p+"assets/img/1678608939185.2c9814e9.png"},875:function(t,s,a){t.exports=a.p+"assets/img/1678609140805.ede6e1e1.png"},876:function(t,s,a){t.exports=a.p+"assets/img/1678609208379.85a8e06a.png"},877:function(t,s,a){t.exports=a.p+"assets/img/1678609262252.b5aa00d6.png"},878:function(t,s,a){t.exports=a.p+"assets/img/1678609362534.27ed8a5f.png"},879:function(t,s,a){t.exports=a.p+"assets/img/1678609716516.18a9d998.png"},880:function(t,s,a){t.exports=a.p+"assets/img/1678609896152.5725627c.png"},881:function(t,s,a){t.exports=a.p+"assets/img/1678610340174.278d729b.png"},882:function(t,s,a){t.exports=a.p+"assets/img/1678610512714.4dccfc49.png"},883:function(t,s,a){t.exports=a.p+"assets/img/1678610631412.b5864bdc.png"},884:function(t,s,a){t.exports=a.p+"assets/img/1678610682064.e20af0a4.png"},885:function(t,s,a){t.exports=a.p+"assets/img/1678610771704.aa9f2bff.png"},886:function(t,s,a){t.exports=a.p+"assets/img/1678610943127.29f2d345.png"},887:function(t,s,a){t.exports=a.p+"assets/img/1678611078801.0a281983.png"},888:function(t,s,a){t.exports=a.p+"assets/img/1678611136207.6c866025.png"},889:function(t,s,a){t.exports=a.p+"assets/img/1678611179723.795b860a.png"},890:function(t,s,a){t.exports=a.p+"assets/img/1678611242774.2255ae6a.png"},891:function(t,s,a){t.exports=a.p+"assets/img/1678611322219.da98e4a1.png"},892:function(t,s,a){t.exports=a.p+"assets/img/1678611402479.1473b24f.png"},893:function(t,s,a){t.exports=a.p+"assets/img/1678611454046.992925d3.png"}}]);