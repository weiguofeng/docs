(window.webpackJsonp=window.webpackJsonp||[]).push([[660],{8466:function(s,a,t){s.exports=t.p+"assets/img/1643273897499.31c5fabe.png"},8467:function(s,a,t){s.exports=t.p+"assets/img/1643273986110.73f81ae1.png"},8468:function(s,a,t){s.exports=t.p+"assets/img/1643274632942.56c6586f.png"},9934:function(s,a,t){"use strict";t.r(a);var n=t(5),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"_7-容器化-安装docker"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7-容器化-安装docker"}},[s._v("#")]),s._v(" 7.容器化-安装docker")]),s._v(" "),n("h1",{attrs:{id:"_3、安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3、安装"}},[s._v("#")]),s._v(" 3、安装")]),s._v(" "),n("h2",{attrs:{id:"_1、centos下安装docker"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、centos下安装docker"}},[s._v("#")]),s._v(" 1、centos下安装docker")]),s._v(" "),n("p",[s._v("其他系统参照如下文档--这个是官方的文档")]),s._v(" "),n("p",[s._v("https://docs.docker.com/engine/install/centos/")]),s._v(" "),n("h3",{attrs:{id:"_1、移除以前docker相关包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、移除以前docker相关包"}},[s._v("#")]),s._v(" 1、移除以前docker相关包")]),s._v(" "),n("p",[s._v("​\t第一步先卸载掉系统的以前的老版本的docker")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum remove "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-client "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-client-latest "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-common "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-latest "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-latest-logrotate "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-logrotate "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-engine\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h3",{attrs:{id:"_2、配置yum源"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、配置yum源"}},[s._v("#")]),s._v(" 2、配置yum源")]),s._v(" "),n("p",[s._v("​\t\t我们安装docker之前先配置yum源，sudo 就是管理员权限的意思")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装yum的依赖")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y yum-utils\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加docker的安装源地址")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum-config-manager "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--add-repo "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\nhttp://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("先安装yum的依赖")]),s._v(" "),n("p",[n("img",{attrs:{src:t(8466),alt:"1643273897499"}})]),s._v(" "),n("p",[s._v("添加docker的安装源地址，反斜杠是换行的意思")]),s._v(" "),n("p",[n("img",{attrs:{src:t(8467),alt:"1643273986110"}})]),s._v(" "),n("h3",{attrs:{id:"_3、安装docker"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3、安装docker"}},[s._v("#")]),s._v(" 3、安装docker")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这个是安装最新版的docker 如果是安装指定版本 就是docker-ce 19.03")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker-ce 代表的是 ce社区版本 EE是企业版")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker-ce-cli 是docker操作命令行的程序")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# containerd.io 是docker容器化的运行环境")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y docker-ce docker-ce-cli containerd.io\n\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#以下是在安装k8s的时候使用")]),s._v("\nyum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y docker-ce-20.10.7 docker-ce-cli-20.10.7  containerd.io-1.4.6\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("h3",{attrs:{id:"_4、启动"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4、启动"}},[s._v("#")]),s._v(" 4、启动")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置开机启动 --now是既要开机启动 也要现在立即启动")]),s._v("\nsystemctl "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" --now\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("​\t然后我们检查一下，docker ps 里面有东西就行，docker info 查看docker的详细信息")]),s._v(" "),n("p",[s._v("因为我们平时从docker hub 仓库下载的内容都是国外的网站，所以我们需要进行docker的加速")]),s._v(" "),n("h3",{attrs:{id:"_5、配置加速"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5、配置加速"}},[s._v("#")]),s._v(" 5、配置加速")]),s._v(" "),n("p",[s._v("这里额外添加了docker的生产环境核心配置cgroup")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /etc/docker\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" /etc/docker/daemon.json "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<-")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'EOF\'\n{\n  "registry-mirrors": ["https://82m9ar63.mirror.aliyuncs.com"],\n  "exec-opts": ["native.cgroupdriver=systemd"],\n  "log-driver": "json-file",\n  "log-opts": {\n    "max-size": "100m"\n  },\n  "storage-driver": "overlay2"\n}\nEOF')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl daemon-reload\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("p",[s._v("其实我们使用的就是阿里云的镜像加速地址")]),s._v(" "),n("p",[n("img",{attrs:{src:t(8468),alt:"1643274632942"}})])])}),[],!1,null,null,null);a.default=e.exports}}]);