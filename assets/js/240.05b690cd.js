(window.webpackJsonp=window.webpackJsonp||[]).push([[240],{2679:function(t,s,p){t.exports=p.p+"assets/img/1640745786945.a293355f.png"},2680:function(t,s,p){t.exports=p.p+"assets/img/1640746186112.73e9f3b4.png"},2681:function(t,s,p){t.exports=p.p+"assets/img/1640746222918.4c0413aa.png"},2682:function(t,s,p){t.exports=p.p+"assets/img/1640746272550.d93db056.png"},2683:function(t,s,p){t.exports=p.p+"assets/img/1640746450337.0d0949f1.png"},2684:function(t,s,p){t.exports=p.p+"assets/img/1640746544718.08f2de1d.png"},2685:function(t,s,p){t.exports=p.p+"assets/img/1640746703102.f38d3017.png"},2686:function(t,s,p){t.exports=p.p+"assets/img/1640747228883.ef8f8d55.png"},2687:function(t,s,p){t.exports=p.p+"assets/img/1640747566985.80b3557e.png"},2688:function(t,s,p){t.exports=p.p+"assets/img/1640747685819.ad42e726.png"},2689:function(t,s,p){t.exports=p.p+"assets/img/1640747783762.a9f75bdb.png"},2690:function(t,s,p){t.exports=p.p+"assets/img/1640748016409.839c27f4.png"},8425:function(t,s,p){"use strict";p.r(s);var a=p(5),_=Object(a.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"_20-审核管理-审核新闻"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_20-审核管理-审核新闻"}},[t._v("#")]),t._v(" 20.审核管理-审核新闻")]),t._v(" "),a("p",[t._v("​\t\t首先这个功能有的人有--有的人没有，是根据权限来划分的")]),t._v(" "),a("p",[t._v("​")]),t._v(" "),a("p",[t._v("我们获取一下新闻数据--这个新闻数据的Audistate 必须是=1 待审核的新闻--然后关联一下分类")]),t._v(" "),a("p",[t._v("​\t\t然后进行过滤一下，如果不是超级管理员就过滤为当前的用户，而且是当前的区域，并且角色是这个区域下的编辑角色")]),t._v(" "),a("p",[a("img",{attrs:{src:p(2679),alt:"1640745786945"}})]),t._v(" "),a("p",[t._v("然后写一下table组件")]),t._v(" "),a("p",[t._v("​\t设置列")]),t._v(" "),a("p",[a("img",{attrs:{src:p(2680),alt:"1640746186112"}})]),t._v(" "),a("p",[t._v("设置操作按钮和 Table组件")]),t._v(" "),a("p",[a("img",{attrs:{src:p(2681),alt:"1640746222918"}})]),t._v(" "),a("p",[t._v("查看页面效果：")]),t._v(" "),a("p",[a("img",{attrs:{src:p(2682),alt:"1640746272550"}})]),t._v(" "),a("p",[t._v("我们从草稿箱提交到审核列表--试一下")]),t._v(" "),a("p",[t._v("​\t发现列表是空的：原因是表字段是author作者 而不是username")]),t._v(" "),a("p",[a("img",{attrs:{src:p(2683),alt:"1640746450337"}})]),t._v(" "),a("p",[t._v("然后再看一下：数据就有了")]),t._v(" "),a("p",[a("img",{attrs:{src:p(2684),alt:"1640746544718"}})]),t._v(" "),a("p",[t._v("没有问题")]),t._v(" "),a("p",[a("img",{attrs:{src:p(2685),alt:"1640746703102"}})]),t._v(" "),a("h4",{attrs:{id:"_2、按钮操作处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、按钮操作处理"}},[t._v("#")]),t._v(" 2、按钮操作处理")]),t._v(" "),a("p",[t._v("​\t如果是通过审核--需要修改audistate  publish为 1 审核通过 待发布状态")]),t._v(" "),a("p",[t._v("​\t如果是驳回 设置 audistate 为3 驳回 publish 为0")]),t._v(" "),a("p",[t._v("先定义一下事件函数：")]),t._v(" "),a("p",[a("img",{attrs:{src:p(2686),alt:"1640747228883"}})]),t._v(" "),a("p",[t._v("​\t需要传入item")]),t._v(" "),a("p",[t._v("​")]),t._v(" "),a("p",[t._v("首先如果点击审核通过，先要将表格的数据更新，把通过的从table中删除掉，驳回也一样")]),t._v(" "),a("p",[t._v("设置传参")]),t._v(" "),a("p",[a("img",{attrs:{src:p(2687),alt:"1640747566985"}})]),t._v(" "),a("p",[t._v("请求设置状态的值")]),t._v(" "),a("p",[a("img",{attrs:{src:p(2688),alt:"1640747685819"}})]),t._v(" "),a("p",[t._v("请求成功后--提示一下")]),t._v(" "),a("p",[a("img",{attrs:{src:p(2689),alt:"1640747783762"}})]),t._v(" "),a("p",[t._v("测试并查看效果：")]),t._v(" "),a("p",[a("img",{attrs:{src:p(2690),alt:"1640748016409"}})])])}),[],!1,null,null,null);s.default=_.exports}}]);