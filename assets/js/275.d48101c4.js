(window.webpackJsonp=window.webpackJsonp||[]).push([[275],{6756:function(t,s,a){t.exports=a.p+"assets/img/1700313637520.f45b48ac.png"},6757:function(t,s,a){t.exports=a.p+"assets/img/1700313996234.4941c76a.png"},6758:function(t,s,a){t.exports=a.p+"assets/img/1700314489768.7847e221.png"},6759:function(t,s,a){t.exports=a.p+"assets/img/1700314551721.082d3888.png"},6760:function(t,s,a){t.exports=a.p+"assets/img/1700314627764.ede2e27e.png"},6761:function(t,s,a){t.exports=a.p+"assets/img/1700314898172.667c1cea.png"},6762:function(t,s,a){t.exports=a.p+"assets/img/1700314836100.394fb3ff.png"},6763:function(t,s,a){t.exports=a.p+"assets/img/1700314959959.e6299b59.png"},6764:function(t,s,a){t.exports=a.p+"assets/img/1700315020667.1dddfea7.png"},6765:function(t,s,a){t.exports=a.p+"assets/img/1700315128773.c06f2c2a.png"},6766:function(t,s,a){t.exports=a.p+"assets/img/1700315311115.41819f56.png"},6767:function(t,s,a){t.exports=a.p+"assets/img/1700315363597.5afc5bec.png"},9773:function(t,s,a){"use strict";a.r(s);var r=a(5),e=Object(r.a)({},(function(){var t=this,s=t.$createElement,r=t._self._c||s;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"_13、乐观锁悲观锁"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_13、乐观锁悲观锁"}},[t._v("#")]),t._v(" 13、乐观锁悲观锁")]),t._v(" "),r("p",[r("img",{attrs:{src:a(6756),alt:"1700313637520"}})]),t._v(" "),r("p",[r("img",{attrs:{src:a(6757),alt:"1700313996234"}})]),t._v(" "),r("h4",{attrs:{id:"_2、模拟修改冲突"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2、模拟修改冲突"}},[t._v("#")]),t._v(" 2、模拟修改冲突")]),t._v(" "),r("p",[t._v("​\t"),r("img",{attrs:{src:a(6758),alt:"1700314489768"}})]),t._v(" "),r("p",[t._v("​\t\t\t预想是100 + 50 -30=120 实际上是70")]),t._v(" "),r("p",[r("img",{attrs:{src:a(6759),alt:"1700314551721"}})]),t._v(" "),r("p",[r("img",{attrs:{src:a(6760),alt:"1700314627764"}})]),t._v(" "),r("p",[t._v("​\t在这种情况下如果不使用锁的情况下，就会有问题")]),t._v(" "),r("h4",{attrs:{id:"_3、乐观锁插件"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3、乐观锁插件"}},[t._v("#")]),t._v(" 3、乐观锁插件")]),t._v(" "),r("p",[t._v("​\t配置类中设置乐观锁插件")]),t._v(" "),r("p",[r("img",{attrs:{src:a(6761),alt:"1700314898172"}})]),t._v(" "),r("p",[t._v("​\t我们在MybatisPlus中使用@Version注解来标识乐观锁字段就可以实现乐观锁的功能了")]),t._v(" "),r("p",[r("img",{attrs:{src:a(6762),alt:"1700314836100"}})]),t._v(" "),r("p",[t._v("​\t我们重新测试：")]),t._v(" "),r("p",[r("img",{attrs:{src:a(6763),alt:"1700314959959"}})]),t._v(" "),r("p",[t._v("​\t结果是150---也不是我们期望的120，因为小王在修改的时候是失败的")]),t._v(" "),r("p",[r("img",{attrs:{src:a(6764),alt:"1700315020667"}})]),t._v(" "),r("p",[r("img",{attrs:{src:a(6765),alt:"1700315128773"}})]),t._v(" "),r("h4",{attrs:{id:"_3、优化修改"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3、优化修改"}},[t._v("#")]),t._v(" 3、优化修改")]),t._v(" "),r("p",[t._v("​\t\t判断是否失败，失败就重试")]),t._v(" "),r("p",[r("img",{attrs:{src:a(6766),alt:"1700315311115"}})]),t._v(" "),r("p",[t._v("​\t这样查看结果--达到预期120了")]),t._v(" "),r("p",[r("img",{attrs:{src:a(6767),alt:"1700315363597"}})]),t._v(" "),r("p",[t._v("https://www.bilibili.com/video/BV12R4y157Be?p=48&spm_id_from=pageDriver&vd_source=243ad3a9b323313aa1441e5dd414a4ef")]),t._v(" "),r("p",[t._v("​\t乐观锁---在表中添加version字段就可以了")])])}),[],!1,null,null,null);s.default=e.exports}}]);