(window.webpackJsonp=window.webpackJsonp||[]).push([[157],{2511:function(t,s,a){t.exports=a.p+"assets/img/1641265824172.3400f9d5.png"},2512:function(t,s,a){t.exports=a.p+"assets/img/1641265910907.105f2b8e.png"},2513:function(t,s,a){t.exports=a.p+"assets/img/1641266090584.6db34aec.png"},2514:function(t,s,a){t.exports=a.p+"assets/img/1641266241162.5a27c9db.png"},2515:function(t,s,a){t.exports=a.p+"assets/img/1641266601385.5286abd1.png"},2516:function(t,s,a){t.exports=a.p+"assets/img/1641275589506.a69396b4.png"},2517:function(t,s,a){t.exports=a.p+"assets/img/1641275651740.5e24c243.png"},2518:function(t,s,a){t.exports=a.p+"assets/img/1641275778941.4cbc4ce5.png"},2519:function(t,s,a){t.exports=a.p+"assets/img/1641276019068.dd748008.png"},2520:function(t,s,a){t.exports=a.p+"assets/img/1641276094212.7bfaae19.png"},2521:function(t,s,a){t.exports=a.p+"assets/img/1641276277161.093da4d3.png"},2522:function(t,s,a){t.exports=a.p+"assets/img/1641276447219.28ac391f.png"},2523:function(t,s,a){t.exports=a.p+"assets/img/1641276714183.20a26a23.png"},2524:function(t,s,a){t.exports=a.p+"assets/img/1641276848917.5b3b631d.png"},2525:function(t,s,a){t.exports=a.p+"assets/img/1641276771379.3a4438bc.png"},2526:function(t,s,a){t.exports=a.p+"assets/img/1641276999044.787463b3.png"},2527:function(t,s,a){t.exports=a.p+"assets/img/1641277052839.8c585c4e.png"},8652:function(t,s,a){"use strict";a.r(s);var p=a(5),r=Object(p.a)({},(function(){var t=this,s=t.$createElement,p=t._self._c||s;return p("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[p("h1",{attrs:{id:"_8-状态管理-loading加载"}},[p("a",{staticClass:"header-anchor",attrs:{href:"#_8-状态管理-loading加载"}},[t._v("#")]),t._v(" 8.状态管理-loading加载")]),t._v(" "),p("p",[t._v("​\t\t我们给用户体验加深一下，在用户异步加载数据的时候，出现一个loading框")]),t._v(" "),p("p",[t._v("​")]),t._v(" "),p("p",[t._v("​\t\t思路是在我们的组件外面--包一个loading框的组件，请求开始我们使用loading框，请求结束关闭loading框，那么我怎么知道什么时候请求结束，什么时候请求开始呢（使用axios的过滤功能）。")]),t._v(" "),p("p",[t._v("​\t到ui组件库中查看一下--找到加载中")]),t._v(" "),p("p",[p("img",{attrs:{src:a(2511),alt:"1641265824172"}})]),t._v(" "),p("p",[p("img",{attrs:{src:a(2512),alt:"1641265910907"}})]),t._v(" "),p("p",[t._v("​\t我们将<spin》组件包裹到NewSRouter上，因为每次切换页面都是由他在控制")]),t._v(" "),p("p",[p("img",{attrs:{src:a(2513),alt:"1641266090584"}})]),t._v(" "),p("p",[t._v("页面查看效果：")]),t._v(" "),p("p",[p("img",{attrs:{src:a(2514),alt:"1641266241162"}})]),t._v(" "),p("p",[t._v("咱们不能让他一直显示的---应该是数据请求之前显示，数据请求之后消失")]),t._v(" "),p("p",[t._v("我们使用--redux来对状态--请求前和请求后进行对状态的控制")]),t._v(" "),p("p",[p("img",{attrs:{src:a(2515),alt:"1641266601385"}})]),t._v(" "),p("h3",{attrs:{id:"_2、我们在axios中加入拦截器"}},[p("a",{staticClass:"header-anchor",attrs:{href:"#_2、我们在axios中加入拦截器"}},[t._v("#")]),t._v(" 2、我们在axios中加入拦截器")]),t._v(" "),p("p",[t._v("​\t主要就是以下这些代码：")]),t._v(" "),p("p",[p("img",{attrs:{src:a(2516),alt:"1641275589506"}})]),t._v(" "),p("p",[t._v("​")]),t._v(" "),p("p",[t._v("​\t在请求之前进行的拦截")]),t._v(" "),p("p",[t._v("​\t11行就是你需要的请求前加的属性")]),t._v(" "),p("p",[p("img",{attrs:{src:a(2517),alt:"1641275651740"}})]),t._v(" "),p("p",[t._v("我们在响应请求的时候隐藏loading")]),t._v(" "),p("p",[p("img",{attrs:{src:a(2518),alt:"1641275778941"}})]),t._v(" "),p("h3",{attrs:{id:"_3、将loading状态交给redux管理"}},[p("a",{staticClass:"header-anchor",attrs:{href:"#_3、将loading状态交给redux管理"}},[t._v("#")]),t._v(" 3、将loading状态交给redux管理")]),t._v(" "),p("p",[t._v("​\t创建loadingReducer")]),t._v(" "),p("p",[p("img",{attrs:{src:a(2519),alt:"1641276019068"}})]),t._v(" "),p("p",[t._v("store中引入loadingReducer")]),t._v(" "),p("p",[p("img",{attrs:{src:a(2520),alt:"1641276094212"}})]),t._v(" "),p("p",[t._v("在NewsRouter中使用connect包裹组件并传入状态")]),t._v(" "),p("p",[p("img",{attrs:{src:a(2521),alt:"1641276277161"}})]),t._v(" "),p("p",[t._v("状态值的使用--用redux管理的值")]),t._v(" "),p("p",[p("img",{attrs:{src:a(2522),alt:"1641276447219"}})]),t._v(" "),p("h3",{attrs:{id:"_4、修改状态的值"}},[p("a",{staticClass:"header-anchor",attrs:{href:"#_4、修改状态的值"}},[t._v("#")]),t._v(" 4、修改状态的值")]),t._v(" "),p("p",[t._v("​\t请求前：")]),t._v(" "),p("p",[p("img",{attrs:{src:a(2523),alt:"1641276714183"}})]),t._v(" "),p("p",[t._v("请求后：")]),t._v(" "),p("p",[p("img",{attrs:{src:a(2524),alt:"1641276848917"}})]),t._v(" "),p("p",[t._v("reducer赋值状态的值")]),t._v(" "),p("p",[p("img",{attrs:{src:a(2525),alt:"1641276771379"}})]),t._v(" "),p("p",[t._v("我们将网速调的慢一些---然后再测试效果")]),t._v(" "),p("p",[p("img",{attrs:{src:a(2526),alt:"1641276999044"}})]),t._v(" "),p("p",[p("img",{attrs:{src:a(2527),alt:"1641277052839"}})])])}),[],!1,null,null,null);s.default=r.exports}}]);