(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{6488:function(t,s,p){t.exports=p.p+"assets/img/1656816666950.4d1b29bd.png"},6489:function(t,s,p){t.exports=p.p+"assets/img/1656816713778.061353cf.png"},6490:function(t,s,p){t.exports=p.p+"assets/img/1656817048647.2df5beb4.png"},6491:function(t,s,p){t.exports=p.p+"assets/img/1656817140577.65433a24.png"},6492:function(t,s,p){t.exports=p.p+"assets/img/1656817385695.b9fc87d5.png"},6493:function(t,s,p){t.exports=p.p+"assets/img/1656817464859.6013064f.png"},6494:function(t,s,p){t.exports=p.p+"assets/img/1656817626801.147c850f.png"},6495:function(t,s,p){t.exports=p.p+"assets/img/1656817693653.8aee8c1d.png"},6496:function(t,s,p){t.exports=p.p+"assets/img/1656817750194.c7711097.png"},6497:function(t,s,p){t.exports=p.p+"assets/img/1656817832539.3b9997b3.png"},6498:function(t,s,p){t.exports=p.p+"assets/img/1656817907121.3baf33bf.png"},6499:function(t,s,p){t.exports=p.p+"assets/img/1656817959823.3315db71.png"},6500:function(t,s,p){t.exports=p.p+"assets/img/1656818003824.09c6600e.png"},6501:function(t,s,p){t.exports=p.p+"assets/img/1656818079848.9fbc591a.png"},6502:function(t,s,p){t.exports=p.p+"assets/img/1656818114702.947abc0d.png"},6503:function(t,s,p){t.exports=p.p+"assets/img/1656818140417.59f2eebd.png"},6504:function(t,s,p){t.exports=p.p+"assets/img/1656818148726.23cd6455.png"},6505:function(t,s,p){t.exports=p.p+"assets/img/1656818269505.56293571.png"},6506:function(t,s,p){t.exports=p.p+"assets/img/1656818339075.526148e7.png"},6507:function(t,s,p){t.exports=p.p+"assets/img/1656818378500.30cf9c4f.png"},6508:function(t,s,p){t.exports=p.p+"assets/img/1656818422145.7a4474a2.png"},6509:function(t,s,p){t.exports=p.p+"assets/img/1656818517682.9e3378e0.png"},6510:function(t,s,p){t.exports=p.p+"assets/img/1656818563900.3fef541a.png"},6511:function(t,s,p){t.exports=p.p+"assets/img/1656818666501.b42995f6.png"},6512:function(t,s,p){t.exports=p.p+"assets/img/1656818736910.9049be58.png"},6513:function(t,s,p){t.exports=p.p+"assets/img/1656818853659.4cc23cb3.png"},8874:function(t,s,p){"use strict";p.r(s);var a=p(5),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"_8-devops-可视化pipeline-第一步-拉取代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-devops-可视化pipeline-第一步-拉取代码"}},[t._v("#")]),t._v(" 8.devops-可视化Pipeline-第一步-拉取代码")]),t._v(" "),a("p",[t._v("​\t我们之前创建的流水线模板已经有了，我们下面只需要在可视化的编辑流水线就可以了")]),t._v(" "),a("p",[a("img",{attrs:{src:p(6488),alt:"1656816666950"}})]),t._v(" "),a("p",[t._v("​\t目前模板的第一步--是克隆代码")]),t._v(" "),a("p",[a("img",{attrs:{src:p(6489),alt:"1656816713778"}})]),t._v(" "),a("p",[t._v("​\t我们注意一下右侧的node及代理（agent是Jenkins集群里面的代理），这个代理的意思就是我们接下来要做什么样的工作，需要什么样的工作我们使用什么的代理，比如我们使用java写的项目，那么就选择maven，maven会对java项目进行打包构建，而如果是前端项目，我们就选择nodejs")]),t._v(" "),a("p",[t._v("​\t\tJenkins集群会有一个master节点有N个代理节点，代理节点会帮助我们进行各个项目的构建工作")]),t._v(" "),a("p",[a("img",{attrs:{src:p(6490),alt:"1656817048647"}})]),t._v(" "),a("p",[t._v("查看一下kubesphere集成Jenkins的官方文档")]),t._v(" "),a("p",[a("img",{attrs:{src:p(6491),alt:"1656817140577"}})]),t._v(" "),a("p",[t._v("​\t我们目前是在大背景下选择了使用maven进行项目的构建，如果某个步骤需要其他的代理来构建的话还是可以单独来选代理的。")]),t._v(" "),a("h4",{attrs:{id:"_1、拉取代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、拉取代码"}},[t._v("#")]),t._v(" 1、拉取代码")]),t._v(" "),a("p",[t._v("​")]),t._v(" "),a("p",[t._v("​\t我们点击第一步的框--然后编辑阶段步骤的名称，然后如果有条件我们设置条件，如果没有条件我们设置执行的任务")]),t._v(" "),a("p",[a("img",{attrs:{src:p(6492),alt:"1656817385695"}})]),t._v(" "),a("p",[t._v("​\t我们在添加步骤的时候--第一步要选择"),a("strong",[t._v("指定容器")]),t._v("，就是我们接下来的任务是指定某个容器下进行工作")]),t._v(" "),a("p",[a("img",{attrs:{src:p(6493),alt:"1656817464859"}})]),t._v(" "),a("p",[t._v("我们选择base容器--因为base容器也可以拉取代码")]),t._v(" "),a("p",[a("img",{attrs:{src:p(6494),alt:"1656817626801"}})]),t._v(" "),a("p",[t._v("然后是添加嵌套步骤---嵌套步骤就是在容器内的操作")]),t._v(" "),a("p",[a("img",{attrs:{src:p(6495),alt:"1656817693653"}})]),t._v(" "),a("p",[t._v("​\t我们选择通过git拉取代码---如果是svn就选择checkout")]),t._v(" "),a("p",[a("img",{attrs:{src:p(6496),alt:"1656817750194"}})]),t._v(" "),a("p",[t._v("输入git代码地址--然后创建凭证")]),t._v(" "),a("p",[a("img",{attrs:{src:p(6497),alt:"1656817832539"}})]),t._v(" "),a("p",[t._v("创建凭证--k8s会自动存储这个git凭证的")]),t._v(" "),a("p",[a("img",{attrs:{src:p(6498),alt:"1656817907121"}})]),t._v(" "),a("p",[t._v("选择分支：")]),t._v(" "),a("p",[a("img",{attrs:{src:p(6499),alt:"1656817959823"}})]),t._v(" "),a("p",[t._v("这样其实流水线的第一步就做完了")]),t._v(" "),a("p",[a("img",{attrs:{src:p(6500),alt:"1656818003824"}})]),t._v(" "),a("p",[t._v("​\t我们拉取完代码，我们不妨让他打印一下，那么我们就再添加一个嵌套步骤")]),t._v(" "),a("p",[a("img",{attrs:{src:p(6501),alt:"1656818079848"}})]),t._v(" "),a("p",[t._v("我们输入个ls或ll，列出文件的内容")]),t._v(" "),a("p",[a("img",{attrs:{src:p(6502),alt:"1656818114702"}})]),t._v(" "),a("p",[t._v("确定")]),t._v(" "),a("p",[a("img",{attrs:{src:p(6503),alt:"1656818140417"}})]),t._v(" "),a("p",[a("img",{attrs:{src:p(6504),alt:"1656818148726"}})]),t._v(" "),a("p",[t._v("​\t我们第一步做完后--我们不妨测试一下第一步做成了什么样的，点击运行")]),t._v(" "),a("p",[a("img",{attrs:{src:p(6505),alt:"1656818269505"}})]),t._v(" "),a("p",[t._v("​\t我们编辑Jenkinsfile查看一下这个文件，copy到项目中方便我们梳理一下这个文件是怎么写的")]),t._v(" "),a("p",[a("img",{attrs:{src:p(6506),alt:"1656818339075"}})]),t._v(" "),a("p",[t._v("点击运行后---正在运行中，点进去")]),t._v(" "),a("p",[a("img",{attrs:{src:p(6507),alt:"1656818378500"}})]),t._v(" "),a("p",[t._v("然后我们查看日志")]),t._v(" "),a("p",[a("img",{attrs:{src:p(6508),alt:"1656818422145"}})]),t._v(" "),a("p",[t._v("发现报错了--期待是一个Http的协议，但是现在出现了一个400的请求，说base容器是一个不合法的")]),t._v(" "),a("p",[a("img",{attrs:{src:p(6509),alt:"1656818517682"}})]),t._v(" "),a("p",[t._v("我们将容器指定成maven的试试")]),t._v(" "),a("p",[a("img",{attrs:{src:p(6510),alt:"1656818563900"}})]),t._v(" "),a("p",[t._v("查看日志--我们可以看到代码已经拉取成功了，但是有个报错是ll这个命令找不到")]),t._v(" "),a("p",[a("img",{attrs:{src:p(6511),alt:"1656818666501"}})]),t._v(" "),a("p",[t._v("​\t其实ll命令是在最纯净的linux里面是没有的，我们改为ls")]),t._v(" "),a("p",[a("img",{attrs:{src:p(6512),alt:"1656818736910"}})]),t._v(" "),a("p",[t._v("再次运行--查看日志--没有问题-流水线第一步运行成功了")]),t._v(" "),a("p",[a("img",{attrs:{src:p(6513),alt:"1656818853659"}})]),t._v(" "),a("p",[t._v("https://www.bilibili.com/video/BV13Q4y1C7hS?p=113&spm_id_from=pageDriver&vd_source=243ad3a9b323313aa1441e5dd414a4ef")])])}),[],!1,null,null,null);s.default=e.exports}}]);