(window.webpackJsonp=window.webpackJsonp||[]).push([[201],{3642:function(t,s,a){t.exports=a.p+"assets/img/image-20220108174153566.5939dc4d.png"},3643:function(t,s,a){t.exports=a.p+"assets/img/image-20220108174350276.11996c43.png"},3644:function(t,s,a){t.exports=a.p+"assets/img/image-20220108175245863.27577bde.png"},3645:function(t,s,a){t.exports=a.p+"assets/img/image-20220108175434890.5d1ddaa8.png"},3646:function(t,s,a){t.exports=a.p+"assets/img/image-20220108175653348.1d73815e.png"},3647:function(t,s,a){t.exports=a.p+"assets/img/image-20220108175837255.0c4e6230.png"},3648:function(t,s,a){t.exports=a.p+"assets/img/image-20220108180003065.6e978d3e.png"},3649:function(t,s,a){t.exports=a.p+"assets/img/image-20220108180130349.d74417a7.png"},3650:function(t,s,a){t.exports=a.p+"assets/img/image-20220108180222057.da7d286b.png"},3651:function(t,s,a){t.exports=a.p+"assets/img/image-20220108180306188.c9cd7264.png"},3652:function(t,s,a){t.exports=a.p+"assets/img/image-20220108180330572.1f136b93.png"},3653:function(t,s,a){t.exports=a.p+"assets/img/image-20220108180444159.f3e53af7.png"},3654:function(t,s,a){t.exports=a.p+"assets/img/image-20220108180601158.73d73f23.png"},3655:function(t,s,a){t.exports=a.p+"assets/img/image-20220108180848072.28a35941.png"},8498:function(t,s,a){"use strict";a.r(s);var i=a(5),e=Object(i.a)({},(function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[i("h1",{attrs:{id:"_8-jenkins集群架构代码自动发布重复构建的问题"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#_8-jenkins集群架构代码自动发布重复构建的问题"}},[t._v("#")]),t._v(" 8.jenkins集群架构代码自动发布重复构建的问题")]),t._v(" "),i("p",[t._v("​")]),t._v(" "),i("p",[t._v("​\t重复构建的问题，我们点击构建一次-然后就进行一次代码的获取-这样其实是不好的，造成硬盘的浪费，还有就是我们版本回退应该是需要保留一个唯一的文件的。")]),t._v(" "),i("p",[t._v("​\t我们点击查看--可用的环境列表")]),t._v(" "),i("p",[i("img",{attrs:{src:a(3642),alt:"image-20220108174153566"}})]),t._v(" "),i("p",[t._v("​\t我们可以将这俩个变量做一个判断：")]),t._v(" "),i("p",[t._v("​\t\t判断如果git_Commit === Git Previous Successfull commit就相当于部署过了")]),t._v(" "),i("p",[t._v("​\t\tgit_Commit是第一次检出提交的hash值，")]),t._v(" "),i("p",[t._v("​\t\tGit Previous Successfull commit：是上一次提交检出的hash值")]),t._v(" "),i("p",[t._v("​\t\t那么判断第一次的检出hash值和上一次检出的hash值如果一致，那么就属于重复构建了")]),t._v(" "),i("p",[i("img",{attrs:{src:a(3643),alt:"image-20220108174350276"}})]),t._v(" "),i("p",[t._v("​\t然后我们编辑脚本：")]),t._v(" "),i("p",[i("img",{attrs:{src:a(3644),alt:"image-20220108175245863"}})]),t._v(" "),i("p",[t._v("​\t进行判断")]),t._v(" "),i("p",[i("img",{attrs:{src:a(3645),alt:"image-20220108175434890"}})]),t._v(" "),i("p",[t._v("​\t我们应该把这个放在部署的判断中，因为如果我们回退是不需要进行这个判断的")]),t._v(" "),i("p",[i("img",{attrs:{src:a(3646),alt:"image-20220108175653348"}})]),t._v(" "),i("p",[t._v("​\t将deploy放在else中")]),t._v(" "),i("p",[i("img",{attrs:{src:a(3647),alt:"image-20220108175837255"}})]),t._v(" "),i("p",[t._v("​\t现在我们测试一下重复构建：")]),t._v(" "),i("p",[i("img",{attrs:{src:a(3648),alt:"image-20220108180003065"}})]),t._v(" "),i("p",[t._v("构建失败--已经构建过了")]),t._v(" "),i("p",[i("img",{attrs:{src:a(3649),alt:"image-20220108180130349"}})]),t._v(" "),i("p",[t._v("我们修改一下代码")]),t._v(" "),i("p",[i("img",{attrs:{src:a(3650),alt:"image-20220108180222057"}})]),t._v(" "),i("p",[i("img",{attrs:{src:a(3651),alt:"image-20220108180306188"}})]),t._v(" "),i("p",[t._v("设置v1.4的tag")]),t._v(" "),i("p",[i("img",{attrs:{src:a(3652),alt:"image-20220108180330572"}})]),t._v(" "),i("p",[t._v("然后我们现在构建一下：")]),t._v(" "),i("p",[i("img",{attrs:{src:a(3653),alt:"image-20220108180444159"}})]),t._v(" "),i("p",[t._v("部署成功")]),t._v(" "),i("p",[i("img",{attrs:{src:a(3654),alt:"image-20220108180601158"}})]),t._v(" "),i("p",[i("img",{attrs:{src:a(3655),alt:"image-20220108180848072"}})])])}),[],!1,null,null,null);s.default=e.exports}}]);