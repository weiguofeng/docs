(window.webpackJsonp=window.webpackJsonp||[]).push([[308],{7538:function(t,s,e){t.exports=e.p+"assets/img/1655049378233.1d1df536.png"},7539:function(t,s,e){t.exports=e.p+"assets/img/1655049528203.d226bb6b.png"},7540:function(t,s,e){t.exports=e.p+"assets/img/1655049778033.21e30231.png"},7541:function(t,s,e){t.exports=e.p+"assets/img/1655049837083.2c5df677.png"},7542:function(t,s,e){t.exports=e.p+"assets/img/1655049966923.8726c50e.png"},7543:function(t,s,e){t.exports=e.p+"assets/img/1655050071848.ac9b68fd.png"},7544:function(t,s,e){t.exports=e.p+"assets/img/1655050388778.081544d3.png"},7545:function(t,s,e){t.exports=e.p+"assets/img/1655050417516.5d3f5c4e.png"},7546:function(t,s,e){t.exports=e.p+"assets/img/1655050453338.f8e0f28e.png"},7547:function(t,s,e){t.exports=e.p+"assets/img/1655050654681.f5e8473e.png"},7548:function(t,s,e){t.exports=e.p+"assets/img/1655050877540.b69c4900.png"},9534:function(t,s,e){"use strict";e.r(s);var p=e(5),r=Object(p.a)({},(function(){var t=this,s=t.$createElement,p=t._self._c||s;return p("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[p("h1",{attrs:{id:"_14-kubesphere给kubernetes上部署中间件-部署mysql负载均衡网络"}},[p("a",{staticClass:"header-anchor",attrs:{href:"#_14-kubesphere给kubernetes上部署中间件-部署mysql负载均衡网络"}},[t._v("#")]),t._v(" 14.kubesphere给kubernetes上部署中间件-部署MySQL负载均衡网络")]),t._v(" "),p("p",[t._v("​\t\t接着之前的部署MySQL，现在我们把MySQL做成可在集群外部访问的应用")]),t._v(" "),p("p",[t._v("​\t\t因为之前我们创建的有状态副本集，他默认给我们创建了一个服务，有状态服务只能在集群内部访问")]),t._v(" "),p("p",[p("img",{attrs:{src:e(7538),alt:"1655049378233"}})]),t._v(" "),p("p",[t._v("​\t我们验证一下是否是集群内部可以访问--是可以的")]),t._v(" "),p("p",[t._v("​\t\t-h加dns是连接指定远程的mysql，是可以连接成功的")]),t._v(" "),p("p",[p("img",{attrs:{src:e(7539),alt:"1655049528203"}})]),t._v(" "),p("h4",{attrs:{id:"集群外部进行访问mysql"}},[p("a",{staticClass:"header-anchor",attrs:{href:"#集群外部进行访问mysql"}},[t._v("#")]),t._v(" 集群外部进行访问MySQL")]),t._v(" "),p("p",[t._v("​\t我们在kubesphere中的服务下，创建一个服务，我们都使用指定"),p("strong",[t._v("工作负载")]),t._v("的方式进行创建服务")]),t._v(" "),p("p",[p("img",{attrs:{src:e(7540),alt:"1655049778033"}})]),t._v(" "),p("p",[t._v("​\t\t设置服务基本信息")]),t._v(" "),p("p",[p("img",{attrs:{src:e(7541),alt:"1655049837083"}})]),t._v(" "),p("p",[t._v("​\t设置访问类型，然后指定工作负载，然后设置端口")]),t._v(" "),p("p",[p("img",{attrs:{src:e(7542),alt:"1655049966923"}})]),t._v(" "),p("p",[t._v("​\t配置外网访问方式--点击创建--我们发现报错了--因为我们上一步选择的访问类型是 "),p("strong",[t._v("集群内部通过服务的后端Endpoint IP 直接访问 Headless")]),t._v("这种方式--这种方式是不可以暴露外网访问的")]),t._v(" "),p("p",[p("img",{attrs:{src:e(7543),alt:"1655050071848"}})]),t._v(" "),p("p",[t._v("​\t\t我们使用的访问类型为 "),p("strong",[t._v("集群内部的Ip来访问服务Virtual IP")]),t._v("就可以设置外网访问了")]),t._v(" "),p("p",[p("img",{attrs:{src:e(7544),alt:"1655050388778"}})]),t._v(" "),p("p",[t._v("​\t\t然后设置外网访问")]),t._v(" "),p("p",[p("img",{attrs:{src:e(7545),alt:"1655050417516"}})]),t._v(" "),p("p",[t._v("​\t\t然后就创建好了--可以看到外网访问的类型是NodePort，这个节点暴露了一个31840的端口")]),t._v(" "),p("p",[p("img",{attrs:{src:e(7546),alt:"1655050453338"}})]),t._v(" "),p("p",[t._v("​\t\t想要使用外网来访问，前提是我们的端口已经开放了，并没有限制--安全组")]),t._v(" "),p("p",[t._v("​\t我们使用外网连接一下，发现没有问题可以连接上")]),t._v(" "),p("p",[p("img",{attrs:{src:e(7547),alt:"1655050654681"}})]),t._v(" "),p("p",[t._v("​\t\t如果我们是在生产环境的话---除非我们需要从外部访问连接生产的数据库，否则我们就可以把对外开放的服务删除掉，为了安全起见--我们保证集群内部的服务是畅通的就ok了")]),t._v(" "),p("p",[p("img",{attrs:{src:e(7548),alt:"1655050877540"}})]),t._v(" "),p("p",[t._v("https://www.bilibili.com/video/BV13Q4y1C7hS?p=81&spm_id_from=pageDriver")])])}),[],!1,null,null,null);s.default=r.exports}}]);